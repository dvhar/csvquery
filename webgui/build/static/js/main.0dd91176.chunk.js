(this.webpackJsonpwebgui=this.webpackJsonpwebgui||[]).push([[0],{13:function(e,t,s){},14:function(e,t,s){},16:function(e,t,s){"use strict";s.r(t);var o=s(2),n=s(3),r=s(6),i=s(5),c=s(4),a=s(1),l=s.n(a),d=s(8),h=s.n(d);s(13),s(14);function p(e){var t=new Request(e.path,{method:"POST",mode:"cors",cache:"no-cache",redirect:"follow",referrer:"no-referrer",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e.body)});return fetch(t).then((function(e){return e.status>=400?{status:e.status}:e.json()}))}function u(e,t){for(var s in e.colnames)if(e.colnames[s].toUpperCase()===t.toUpperCase())return s;return-1}function b(e,t){var s=[],o=u(e,t);if(o>-1)for(var n in e.vals)s.indexOf(e.vals[n][o])<0&&s.push(e.vals[n][o]);return s}function j(e,t,s){if("*"===s)return e;var o=JSON.parse(JSON.stringify(e)),n=u(e,t);if(n>-1){var r=e.vals.length-1;for(var i in e.vals)null!=e.vals[r-i][n]&&String(e.vals[r-i][n]).toUpperCase()===String(s).toUpperCase()||(o.vals.splice(r-i,1),o.numrows--);return o}return null}var m=1,y=2,f=32,x=256,O=0,v=1,g=3,w=6,k=7,S=["Null","Int","Float","Date","Duration","Text","Unknown"],D=s(0),C=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={clicked:1},n}return Object(n.a)(s,[{key:"shiftEnter",value:function(e){if(13===e.keyCode&&e.shiftKey){e.preventDefault();var t=this.textbox.value;this.props.submitQuery({query:t})}}},{key:"render",value:function(){var e=this,t=Object(D.jsx)("span",{className:1===this.state.clicked?"dim":"",children:"\u25bc"});return Object(D.jsx)("div",{className:"queryMenuContainer",children:Object(D.jsxs)("div",{className:"dropmenu queryMenuDiv",children:[Object(D.jsx)("div",{className:"dropButton queryMenuButton",onClick:function(){e.setState({clicked:1^e.state.clicked})},children:Object(D.jsxs)("h2",{className:"commandtitle",children:["Enter CSV Query ",t]})}),Object(D.jsxs)("div",{className:"dropmenu-content queryTextContainer ".concat(1===this.state.clicked?"show":""),children:[Object(D.jsx)("textarea",{rows:"10",className:"queryTextEntry",id:"textBoxId",placeholder:"If running multiple queries, separate them with a semicolon;\nSubmit queries by pressing the button or shift-enter"}),Object(D.jsx)("br",{}),Object(D.jsx)("button",{className:"queryRunButton dropContent",onClick:function(){var t=e.textbox.value;e.props.s.lastpass="",e.props.submitQuery({query:t})},children:"Submit Query"}),Object(D.jsx)("button",{className:"queryRunButton",onClick:function(){e.props.sendSocket({type:g})},children:"End Query Early"})]})]})})}},{key:"componentDidMount",value:function(){var e=this;this.textbox=document.getElementById("textBoxId"),this.textbox.onkeydown=function(t){return e.shiftEnter(t)}}}]),s}(l.a.Component),I=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={title:n.props.title},n}return Object(n.a)(s,[{key:"itemInList",value:function(e,t,s){var o=this;if(null!==e)return Object(D.jsx)("option",{className:"tableButton1".concat(this.props.hideColumns[t]?" hiddenColumn":""),onClick:function(){return o.props.toggleColumn(t)},children:e},t)}},{key:"SelectColumnDropdown",value:function(e,t,s){return Object(D.jsxs)("div",{className:"dropmenu tableModDiv",children:[Object(D.jsx)("div",{className:"dropButton tableModButton",children:e}),Object(D.jsx)("div",{className:"dropmenu-content absolute-pos tableModDrop",children:Object(D.jsx)("select",{size:String(t),className:"dropSelect",children:s})})]})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"dropmenu tableModDiv",children:[Object(D.jsx)("div",{className:"dropButton tableModButton",children:this.props.title}),Object(D.jsx)("div",{className:"dropmenu-content absolute-pos tableModDrop",children:Object(D.jsx)("select",{size:String(Math.min(20,this.props.table.colnames.length)),className:"dropSelect",children:this.props.table.colnames.map((function(t,s){return e.itemInList(t,s)}))})})]})}}]),s}(l.a.Component),M=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={title:n.props.title,secondDrop:!1,firstChoice:"",secondDropItems:[]},n}return Object(n.a)(s,[{key:"dropItem",value:function(e,t,s){var o=this;if(null!==e)return Object(D.jsx)("option",{className:"tableButton1",onClick:function(){switch(s){case"first":o.setState({secondDrop:!0,firstChoice:e,secondDropItems:b(o.props.table,e)});break;case"second":o.props.dropAction(o.state.firstChoice,e)}},children:e},t)}},{key:"render",value:function(){var e=this,t=[Object(D.jsx)("select",{className:"dropSelect",size:Math.min(20,this.props.firstDropItems.length),children:this.props.firstDropItems.map((function(t,s){return e.dropItem(t,s,"first")}))})];return this.state.secondDrop&&t.push(Object(D.jsx)("select",{className:"dropSelect",size:Math.min(20,this.state.secondDropItems.length+1),children:["*"].concat(this.state.secondDropItems.sort()).map((function(t,s){return e.dropItem(t,s,"second")}))})),Object(D.jsxs)("div",{className:"dropmenu tableModDiv",children:[Object(D.jsx)("div",{className:"dropButton tableModButton",children:this.props.title}),Object(D.jsx)("div",{className:"dropmenu-content absolute-pos tableModDrop",children:t})]})}}]),s}(l.a.Component),N=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={tableBodyId:Math.random(),tableBodyDivId:Math.random(),tableHeadId:Math.random(),tableHeadDivId:Math.random(),sortWay:1},n}return Object(n.a)(s,[{key:"sorter",value:function(e){var t,s,o;t=this.props.table,s=e,o=this.state.sortWay,t.vals.sort((function(e,n){var r=e[s],i=n[s];return 1===t.types[s]||2===t.types[s]?o*(Number(r)>Number(i)?1:-1):o*(String(r)>String(i)?1:-1)})),this.setState({sortWay:-1*this.state.sortWay})}},{key:"header",value:function(){var e=this,t=this.props.table.colnames.map((function(t,s){if(0===e.props.hideColumns[s])return Object(D.jsx)("th",{className:"tableCell",onClick:function(){return e.sorter(s)},children:e.props.table.colnames[s]},s)})),s=Array.from({length:this.props.table.types.length},(function(e,t){return t+1})),o=this.props.table.types.map((function(t,o){if(0===e.props.hideColumns[o])return Object(D.jsxs)("td",{className:"tableCell typeCell",onClick:function(){return e.sorter(o)},children:["".concat(s[o]," "),Object(D.jsxs)("span",{className:"noselect",children:["- ",S[e.props.table.types[o]]]})]},o)}));return o.push(Object(D.jsx)("td",{id:"scrollBuffer",children:"____"})),[Object(D.jsx)("tr",{className:"tableRow",children:t}),Object(D.jsx)("tr",{className:"tableRow",id:"typeHeader",children:o})]}},{key:"row",value:function(e,t){var s=this;return Object(D.jsx)("tr",{className:"tableRow",children:e.map((function(e,t){if(0===s.props.hideColumns[t]){if(e.indexOf("\n")>-1){var o=e.split("\n");e=[];for(var n=0;n<o.length-1;n++)e.push(o[n],Object(D.jsx)("br",{}));e.push(o[o.length-1])}return Object(D.jsxs)("td",{className:"tableCell",children:[" ",e," "]},t)}}))},t)}},{key:"render",value:function(){var e=this;return null===this.props.table.vals&&(this.props.table.vals=[]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"tableDiv tableHeadDiv",id:this.state.tableHeadDivId,children:Object(D.jsx)("table",{className:"tableHead",children:Object(D.jsx)("thead",{id:this.state.tableHeadId,children:this.header()})})}),Object(D.jsx)("div",{className:"tableDiv tableBodyDiv",id:this.state.tableBodyDivId,children:Object(D.jsx)("table",{className:"tableBody",id:this.state.tableBodyId,children:Object(D.jsx)("tbody",{children:this.props.table.vals.map((function(t,s){return e.row(t,s)}))})})})]})}},{key:"resize",value:function(){var e,t,s=document.getElementById(this.state.tableBodyId),o=document.getElementById(this.state.tableBodyDivId),n=document.getElementById(this.state.tableHeadId),r=document.getElementById(this.state.tableHeadDivId),i=window.innerWidth,c=s.childNodes[0];if(c.childNodes.length>0&&c.childNodes[0].childNodes.length>0){var a,l,d,h=c.childNodes[0].childNodes;for(var p in h)a=h[p],l=n.childNodes[0].childNodes[p],a.offsetWidth&&l.offsetWidth&&(a.style.minWidth=l.style.minWidth="0px",e=a.offsetWidth,t=l.offsetWidth,d=e>t?e:t,a.style.minWidth=l.style.minWidth="".concat(d+1,"px"))}r.style.margin="auto",r.style.maxWidth=o.style.maxWidth="".concat(Math.min(s.offsetWidth+15,1*i),"px"),s.offsetHeight<=o.offsetHeight&&(r.style.maxWidth=o.style.maxWidth="".concat(Math.min(s.offsetWidth,1*i),"px")),o.addEventListener("scroll",(function(){r.scrollLeft=o.scrollLeft}))}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"componentDidMount",value:function(){this.resize()}}]),s}(l.a.Component),q=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"toggleColumn",value:function(e){this.props.hideColumns[e]^=1,this.forceUpdate()}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"viewContainer",children:[Object(D.jsx)("div",{className:"tableModifiers",children:Object(D.jsxs)("div",{className:"tableQuery",children:[Object(D.jsxs)("div",{children:[" ",this.props.table.query," "]}),Object(D.jsx)(M,{title:"Show with column value\u25bc",dropAction:function(t,s){e.props.rows.col=t,e.props.rows.val=s,e.forceUpdate()},table:this.props.table,firstDropItems:this.props.table.colnames}),Object(D.jsx)(I,{title:"Show/Hide columns\u25bc",table:this.props.table,hideColumns:this.props.hideColumns,toggleColumn:function(t){return e.toggleColumn(t)}}),Object(D.jsx)("div",{className:"dropmenu tableModDiv",children:Object(D.jsx)("div",{className:"dropButton tableModButton",children:Object(D.jsxs)("span",{children:["Rows: ",this.props.table.numrows]})})})]})}),Object(D.jsx)(N,{table:j(this.props.table,this.props.rows.col,this.props.rows.val),hideColumns:this.props.hideColumns,toggleColumn:function(t){return e.toggleColumn(t)}})]})}}]),s}(l.a.Component),T=["()","(<expression>)","(<expression>, <expression>)","(<expression>, <2 numbers> or <regex>)","(<expression>, <optional password>)","(<any number of expressions>)","(<expression>, <optional decimal places>)","(<expression> or *)","(<expression>, <format string> or <format code>)"],B=[["sum","aggregate sum",1],["avg","aggregate average",1],["min","aggregate minimum",1],["max","aggregate maximum",1],["count","aggregate count",7],["stdev","aggregate sample standard deviation",1],["stdevp","aggregate population standard deviation",1],["inc","number that increments each line",0],["rand","random number",0],["abs","absolute value",1],["coalesce","first non-null expression",5],["now","current local datetime",0],["nowlocal","current local datetime",0],["nowgm","current GMT datetime",0],["year","year",1],["month","month (1-12)",1],["monthname","month name",1],["week","week of year (1-52)",1],["dayname","day name",1],["dayofyear","day of year (1-366)",1],["dayofmonth","day of month (1-31)",1],["day","day of month (same as dayofmonth)",1],["dayofweek","day of week (1-7, Sunday=1)",1],["hour","hour (0-23)",1],["minute","minute (0-59)",1],["second","second (0-59)",1],["format","format datetime text",8],["ceil","round up",6],["floor","round down",6],["round","round up or down to nearest",6],["cos","trig cosine",1],["sin","trig sine",1],["tan","trig tangent",1],["acos","trig inverse cosine",1],["asin","trig inverse sine",1],["atan","trig inverse tangent",1],["exp","e to the power of number",1],["pow","1st expression to the power of second expression",2],["log","log base e",1],["log2","log base 2",1],["log10","log base 10",1],["sqrt","square root",1],["cbrt","cube root",1],["upper","upper case",1],["lower","lower case",1],["len","lenth of text",1],["substr","substring from index+length or pattern matching",3],["sip","sip hash (outputs a 64bit number)",1],["md5","md5 hash in base64",1],["sha1","sha1 hash in base64",1],["sha256","sha256 hash in base64",1],["string","convert datatype to text",1],["int","convert datatype to integer",1],["float","convert datatype to floating point number",1],["date","convert datatype to datetime",1],["duration","convert datatype to duration",1],["encrypt","encrypt",4],["decrypt","decrypt",4],["base64_encode","encode to bas64",1],["base64_decode","decode from base64",1]],H=[[1,"mm/dd/yy","%m/%d/%y"],[101,"mm/dd/yyyy","%m/%d/%Y"],[2,"yy.mm.dd","%y.%m.%d"],[102,"yyyy.mm.dd","%Y.%m.%d"],[3,"dd/mm/yy","%d/%m/%y"],[103,"dd/mm/yyyy","%d/%m/%Y"],[4,"dd.mm.yy","%d.%m.%y"],[104,"dd.mm.yyyy","%d.%m.%Y"],[5,"dd-mm-yy","%d-%m-%y"],[105,"dd-mm-yyyy","%d-%m-%Y"],[6,"dd Mon yy","%d %b %y"],[106,"dd Mon yyyy","%d %b %Y"],[7,"Mon dd, yy","%b %d, %y"],[107,"Mon dd, yyyy","%b %d, %Y"],[8,"hh:mi:ss","%I:%M:%S"],[108,"hh:mi:ss","%I:%M:%S"],[9,"Mon dd yy hh:mi:ss:mmmmAM","%b %d %y %I:%M:%S:mmmm%p"],[109,"Mon dd yyyy hh:mi:ss:mmmmAM","%b %d %Y %I:%M:%S:mmmm%p"],[10,"mm-dd-yy","%m-%d-%y"],[110,"mm-dd-yyyy","%m-%d-%Y"],[11,"yy/mm/dd","%y/%m/%d"],[111,"yyyy/mm/dd","%Y/%m/%d"],[12,"yymmdd","%y%m%d"],[112,"yyyymmdd","%Y%m%d"],[13,"dd Mon yy hh:mi:ss:mmm(24h)","%d %b %y %H:%M:%S:mmm"],[113,"dd Mon yyyy hh:mi:ss:mmm(24h)","%d %b %Y %H:%M:%S:mmm"],[14,"hh:mi:ss:mmm(24h)","%H:%M:%S:mmm"],[114,"hh:mi:ss:mmm(24h)","%H:%M:%S:mmm"],[15,"yy-mm-dd","%y-%m-%d"],[115,"yyyy-mm-dd","%Y-%m-%d"],[20,"yy-mm-dd hh:mi:ss(24h)","%y-%m-%d %H:%M:%S"],[120,"yyyy-mm-dd hh:mi:ss(24h)","%Y-%m-%d %H:%M:%S"],[21,"yy-mm-dd hh:mi:ss.mmm(24h)","%y-%m-%d %H:%M:%S.mmm"],[121,"yyyy-mm-dd hh:mi:ss.mmm(24h)","%Y-%m-%d %H:%M:%S.mmm"],[126,"yyyy-mm-ddThh:mi:ss.mmm (no Spaces)","%Y-%m-%dT%H:%M:%S.mmm"],[127,"yyyy-mm-ddThh:mi:ss.mmmZ (no Spaces)","%Y-%m-%dT%H:%M:%S.mmmZ"],[130,"dd Mon yyyy hh:mi:ss:mmmAM","%d %b %Y %I:%M:%S:mmm%p"],[131,"dd/mm/yyyy hh:mi:ss:mmmAM","%d/%b/%Y %I:%M:%S:mmm%p"],[119,"Mon dd yyyy hh:mi:ssAM","%b %d %Y %I:%M:%S%p"],[140,"dd Mon yyyy hh:mi:ssAM","%d %b %Y %I:%M:%S%p"],[141,"dd/mm/yyyy hh:mi:ssAM","%d/%b/%Y %I:%M:%S%p"],[136,"yyyy-mm-ddThh:mi:ss (no Spaces)","%Y-%m-%dT%H:%M:%S"],[137,"yyyy-mm-ddThh:mi:ssZ (no Spaces)","%Y-%m-%dT%H:%M:%SZ"]],L=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).table=Object(D.jsxs)("table",{className:"helpTable helpDrop",children:[Object(D.jsx)("th",{className:"helpTable helpDrop",children:"Format code"}),Object(D.jsx)("th",{className:"helpTable helpDrop",children:"Resulting format"}),Object(D.jsx)("th",{className:"helpTable helpDrop",children:"Corresonding format string"}),H.map((function(e){return Object(D.jsx)("tr",{children:e.map((function(e){return Object(D.jsx)("td",{className:"helpTable helpDrop",children:e})}))})}))]}),e.showbut=Object(D.jsx)("button",{onClick:function(){e.show=!0},children:"Show list of preset date formats"}),e.show=!1,e}return Object(n.a)(s,[{key:"render",value:function(){return!0===this.show?this.table:this.showbut}}]),s}(l.a.Component),E=function(e){var t=e.fun,s=e.usage,o=e.params;return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"helpTable helpDrop",children:t}),Object(D.jsx)("td",{className:"helpTable helpDrop",children:T[o]}),Object(D.jsx)("td",{className:"helpTable helpDrop",children:s})]})})},P=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).table=Object(D.jsxs)("table",{className:"helpTable helpDrop",children:[Object(D.jsx)("th",{className:"helpTable helpDrop",children:"Function"}),Object(D.jsx)("th",{className:"helpTable helpDrop",children:"parameters"}),Object(D.jsx)("th",{className:"helpTable helpDrop",children:"description"}),B.map((function(e){return Object(D.jsx)(E,{fun:e[0],usage:e[1],params:e[2]})}))]}),e.showbut=Object(D.jsx)("button",{onClick:function(){e.show=!0},children:"Show list of functions"}),e.show=!1,e}return Object(n.a)(s,[{key:"render",value:function(){return!0===this.show?this.table:this.showbut}}]),s}(l.a.Component),Q=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={updateMsg:"",updated:!1},n}return Object(n.a)(s,[{key:"checkupdate",value:function(){var e=this;setTimeout((function(){if(!e.state.updated&&e.props.notifyUpdate){var t=new URL("https://davosaur.com/csv/index.php?d=version2&c=".concat(e.props.version)),s=fetch(t);console.log(s),s.then((function(t){t.ok&&t.json().then((function(t){if(""!==e.props.version&&t.version>e.props.version){var s=[Object(D.jsx)("a",{href:"https://davosaur.com/csv",target:"_blank",children:"New version available"}),":\t",t.version];t.notes&&(Array.isArray(t.notes)?(s.push(Object(D.jsx)("br",{})),s.push(Object(D.jsx)("br",{})),t.notes.forEach((function(e){s.push(Object(D.jsx)("li",{children:e}))}))):s=s.concat([Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),t.notes])),e.setState({updateMsg:s})}}))})),e.setState({updated:!0})}}),1e3)}},{key:"addclass",value:function(e){var t=this;e&&(e.d||(e.className+=" helpDrop",e.d=!0),e.childNodes.forEach((function(e){return t.addclass(e)})))}},{key:"render",value:function(){var e=this;return this.props.show?(this.checkupdate(),setTimeout((function(){e.addclass(document.getElementById("helpBox"))}),50),Object(D.jsxs)("div",{className:"helpBox",id:"helpBox",children:[Object(D.jsx)("h3",{children:"What this software does"}),Object(D.jsx)("hr",{}),"Run ",Object(D.jsx)("code",{children:"select"})," queries on csv files, display the results, and save to new csv files. It can handle big csv files that are too big for other programs.",Object(D.jsx)("br",{}),"It will show you the first several hundred results in the browser, with 2 options for viewing certain rows or columns. You can click on a column header to sort the displayed results by that column.",Object(D.jsx)("h3",{children:"How to save files"}),Object(D.jsx)("hr",{}),"After running a query, hit the save button. Navigate to where you want to save, type in the file name, and hit Enter. All the queries on the page will run again, but this time they will be saved to csv files. The program will infer whether or not to output a header unless you override it with an option. To always output header, add ",Object(D.jsx)("code",{children:"oh"})," to the beginning of the query. To never output header, add ",Object(D.jsx)("code",{children:"noh"}),".",Object(D.jsx)("h3",{children:"How to use the query language"}),Object(D.jsx)("hr",{}),"This program uses a custom but incomplete version of SQL that's designed to be easy to use and has some additions to handle csv formatting issues.",Object(D.jsx)("br",{}),Object(D.jsxs)("blockquote",{children:[Object(D.jsx)("h4",{children:"Specifying a file"}),"Click ",Object(D.jsx)("code",{children:"Browse Files"})," to find files, and double click one to add it to the query.",Object(D.jsx)("br",{}),"File paths can be saved for later use by running an ",Object(D.jsxs)("code",{children:["add ","<alias> <filepath>"]})," command. You may add file format options (described in the next section) after the filepath. The ",Object(D.jsxs)("code",{children:["drop ","<alias>"]})," command only deletes the alias, not the file. To view all aliases, type ",Object(D.jsx)("code",{children:"show"}),".",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Example of specifying a file by filename and then by saved name:",Object(D.jsx)("br",{}),Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["select * from '/home/user/pets.csv'",Object(D.jsx)("br",{}),"add pets '/home/user/pets.csv'",Object(D.jsx)("br",{}),"select * from pets",Object(D.jsx)("br",{}),"drop pets"]})}),Object(D.jsx)("h4",{children:"Specifying csv delimiters and file header"}),"These characters can be added to the beginning of a query or after the file path to specify file format details: ",Object(D.jsx)("code",{children:"nh"}),", ",Object(D.jsx)("code",{children:"h"}),", ",Object(D.jsx)("code",{children:"ah"}),", ",Object(D.jsx)("code",{children:"s"}),", ",Object(D.jsx)("code",{children:"t"}),", ",Object(D.jsx)("code",{children:"|"}),", and ",Object(D.jsx)("code",{children:":"}),". The characters ",Object(D.jsx)("code",{children:"nh"}),", ",Object(D.jsx)("code",{children:"h"}),", and ",Object(D.jsx)("code",{children:"ah"})," mean 'no header', 'header', and 'auto header' respectively. Default behavior is to treat the first line of the file as a header. ",Object(D.jsx)("code",{children:"ah"})," will guess if there is a header based on whether or not the first row contains numbers. ",Object(D.jsx)("code",{children:"s"}),", ",Object(D.jsx)("code",{children:"t"}),", ",Object(D.jsx)("code",{children:"|"}),", ",Object(D.jsx)("code",{children:":"})," mean the delimiter is 'spaces', 'tabs', 'pipes', and 'colons' respectively. Default delimiter is commas. See examples in the next section.",Object(D.jsx)("h4",{children:"Selecting some columns"}),"Columns can be specified by name or number. Select column numbers by prefacing the number with ",Object(D.jsx)("code",{children:"c"}),", or by using a plain unquoted number if putting a ",Object(D.jsx)("code",{children:"c"})," in front of the whole query. To make commas between selections optional (but require ",Object(D.jsx)("code",{children:"as"})," to rename), put ",Object(D.jsx)("code",{children:"m"})," in front of the query, or set ",Object(D.jsx)("code",{children:"need_comma_separator"})," to ",Object(D.jsx)("code",{children:"false"})," in the config file.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Example: selecting columns 1-3, dogs, and cats from a file with no header and name column 2 as 'food'",Object(D.jsx)("br",{}),Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["nh select c1, c2 'food', c3, dogs, cats from '/home/user/pets.csv'",Object(D.jsx)("br",{}),"select c1, c2 'food', c3 dogs, cats from 'C:\\\\users\\dave\\pets.csv' nh",Object(D.jsx)("br",{}),"c nh select 1, 2 'food', 3, dogs, cats from 'C:\\\\users\\dave\\pets.csv'",Object(D.jsx)("br",{}),"m c nh select 1 2 as 'food' 3 dogs cats from 'C:\\\\users\\dave\\pets.csv'"]})}),Object(D.jsx)("h4",{children:"Selecting all columns"}),Object(D.jsx)("code",{children:"select *"})," works how you'd expect. If you don't specify any values at all, it will also select all. It will also select all if you skip the ",Object(D.jsx)("code",{children:"select from"})," part altogether.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Examples:",Object(D.jsx)("br",{}),Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["select * from '/home/user/pets.csv'",Object(D.jsx)("br",{}),"select from '/home/user/pets.csv'",Object(D.jsx)("br",{}),"'/home/user/pets.csv'"]})}),Object(D.jsx)("h4",{children:"Selecting more complex expressions"}),"Use ",Object(D.jsx)("code",{children:"+ - * / %"})," operators to add, subtract, multiply, divide, and modulus expressions. You can combine them with parentheses. You can also use case expressions.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Examples:",Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["select birthdate+'3 weeks', c1*c2, c1/c2, c1-c2, c1%2, (c1-23)*(c2+34) from '/home/user/pets.csv'",Object(D.jsx)("br",{}),"select case when c1*2<10 then dog when c1*10>=10.2 then cat else monkey end from '/home/user/pets.csv'",Object(D.jsx)("br",{}),"select case c1 / c4 when (c3+c3)*2 then dog when c1*10 then cat end from '/home/user/pets.csv'"]})}),Object(D.jsx)("h4",{children:"Expression Aliases"}),"Begin a query with ",Object(D.jsx)("code",{children:"with <expression> as <alias>"})," to use that value throughout the query. Separate aliases with ",Object(D.jsx)("code",{children:","})," or ",Object(D.jsx)("code",{children:"and"}),".",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Example:",Object(D.jsx)("br",{}),Object(D.jsx)("blockquote",{children:Object(D.jsx)("code",{children:"with age*7 as dogyears, 'Mr.'+name as dogname select dogname, dogyears from '/home/user/pets.csv' order by dogyears"})}),Object(D.jsx)("h4",{children:"Functions"}),Object(D.jsxs)("blockquote",{children:[Object(D.jsx)(P,{}),Object(D.jsx)("br",{}),"Aggregate functions can be used with a ",Object(D.jsx)("code",{children:"group by"})," clause and group by as many values as you want. Without a ",Object(D.jsx)("code",{children:"group by"})," clause, they will aggregate everything into a single row.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)("code",{children:"Encrypt"})," function only guarantees a unique nonce for every value encrypted while the program is running. Uniqueness cannot be guaranteed between restarts, so avoid using the same password in different sessions. It does not hide the length of a value, so it may be best to use other security solutions when possible. ",Object(D.jsx)("code",{children:"Decrypt"})," function returns an empty value if ciphertext has been tampered with. If no password is supplied, the program will prompt you for one.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Math functions like ",Object(D.jsx)("code",{children:"asin"})," and ",Object(D.jsx)("code",{children:"log"})," return an empty value when not a real number, such as ",Object(D.jsx)("code",{children:"log(0)"})," or ",Object(D.jsx)("code",{children:"asin(100)"}),". To return ",Object(D.jsx)("code",{children:"nan"}),", ",Object(D.jsx)("code",{children:"inf"}),", or ",Object(D.jsx)("code",{children:"-inf"})," instead, add the option ",Object(D.jsx)("code",{children:"nan"})," to the beginning of the query. Return value will still be empty if function is called on a null value.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Format function uses the type of date format string described by the ",Object(D.jsx)("a",{href:"https://linux.die.net/man/3/strftime",target:"_blank",children:"Linux Manual"}),", with the addition of ",Object(D.jsx)("code",{children:"mmm"})," for milliseconds. It can also take the format code for a preset format from the following table:",Object(D.jsx)("br",{}),Object(D.jsx)(L,{}),Object(D.jsx)("br",{})]}),Object(D.jsx)("h4",{children:"Selecting distinct rows or aggregates"}),"To only return distinct rows of data, put the ",Object(D.jsx)("code",{children:"distinct"})," keyword after ",Object(D.jsx)("code",{children:"select"}),".",Object(D.jsx)("br",{}),"To calculate aggregate function of distinct values, put the ",Object(D.jsx)("code",{children:"distinct"})," keyword in the function call.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Examples:",Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["select distinct dogtypes, fluffiness from '/home/user/pets.csv'",Object(D.jsx)("br",{}),"select count(distinct species) from '/home/user/pets.csv'"]})}),Object(D.jsx)("h4",{children:"Selecting a number of rows"}),"Use the ",Object(D.jsx)("code",{children:"top"})," keyword after ",Object(D.jsx)("code",{children:"select"}),", or ",Object(D.jsx)("code",{children:"limit"})," at the end of the query. Be careful not to confuse the number after ",Object(D.jsx)("code",{children:"top"})," for part of an expression.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Examples:",Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["select top 100 c1, c2, c3, dogs, cats from '/home/user/pets.csv'",Object(D.jsx)("br",{}),"select c1, c2, c3, dogs, cats from '/home/user/pets.csv' limit 100"]})}),Object(D.jsx)("h4",{children:"Selecting rows that match a certain condition"}),"Specify conditions you're looking for by using any combinates of conditional statements with parentheses, ",Object(D.jsx)("code",{children:"and"}),", ",Object(D.jsx)("code",{children:"or"}),", and ",Object(D.jsx)("code",{children:"xor"})," operators. Dates are handled nicely, so ",Object(D.jsx)("code",{children:"May 18 1955"})," is the same as ",Object(D.jsx)("code",{children:"5/18/1955"}),". Empty entries can be compared against the keyword ",Object(D.jsx)("code",{children:"null"}),". The ",Object(D.jsx)("code",{children:"in"})," operator can be used with a subquery, though correlated subqueries are not yet supported.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Valid relational operators are ",Object(D.jsx)("code",{children:"is"}),", ",Object(D.jsx)("code",{children:"="}),",  ",Object(D.jsx)("code",{children:"!="}),",  ",Object(D.jsx)("code",{children:"<>"}),",  ",Object(D.jsx)("code",{children:">"}),",  ",Object(D.jsx)("code",{children:"<"}),",  ",Object(D.jsx)("code",{children:">="}),",  ",Object(D.jsx)("code",{children:"<="}),", ",Object(D.jsx)("code",{children:"like"}),", ",Object(D.jsx)("code",{children:"in"}),", and ",Object(D.jsx)("code",{children:"between"}),". ",Object(D.jsx)("code",{children:"!"})," is evaluated the same as ",Object(D.jsx)("code",{children:"not"}),", and can be put in front of a relational operator or a whole comparison.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Examples:",Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["select from '/home/user/pets.csv' where dateOfBirth < 'april 10 1980' or age between (c3-19)*1.2 and 30",Object(D.jsx)("br",{}),"select from '/home/user/pets.csv' where (c1 < c13 or fuzzy = very) and not (c3 = null or weight >= 50 or name not like 'a_b%')",Object(D.jsx)("br",{}),"select from '/home/user/pets.csv' where c1 in (2,3,5,7,11,13,17,19,23)",Object(D.jsx)("br",{}),"select from '/home/user/pets.csv' where null not in (c1,c2,c3)",Object(D.jsx)("br",{}),"select from '/home/user/pets.csv' where name is not null",Object(D.jsx)("br",{}),"select from '/home/user/pets.csv' where species not in (select species from behaviors.csv where prey != humans)"]})}),Object(D.jsx)("h4",{children:"Sorting results"}),"Use ",Object(D.jsx)("code",{children:"order by"})," at the end of the query, followed by any number of expressions, each followed optionally by ",Object(D.jsx)("code",{children:"desc"}),". Sorts by ascending values unless ",Object(D.jsx)("code",{children:"desc"})," is specified.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Examples:",Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["select from '/home/user/pets.csv' where dog = husky order by age, fluffiness desc",Object(D.jsx)("br",{}),"select from '/home/user/pets.csv' order by c2*c3"]})}),Object(D.jsx)("h4",{children:"Joining Files"}),"Any number of files can be joined together. ",Object(D.jsx)("code",{children:"left"})," and ",Object(D.jsx)("code",{children:"inner"})," joins are allowed, default is ",Object(D.jsx)("code",{children:"inner"}),". Join conditions can have as many comparisions as you want, combined with ",Object(D.jsx)("code",{children:"and"}),", ",Object(D.jsx)("code",{children:"or"}),", ",Object(D.jsx)("code",{children:"xor"}),", and parentheses.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Examples:",Object(D.jsx)("blockquote",{children:Object(D.jsxs)("code",{children:["select pet.name, pet.species, code.c1 from '/home/user/pets.csv' pet left join '/home/user/codes.csv' code on pet.species = code.species order by pet.age",Object(D.jsx)("br",{}),"select pet.name, code.c1, fur.flufftype from '/home/user/pets.csv' pet inner join '/home/user/fur.csv' fur on pet.fluffiness = fur.fluff and fur.flufftype ","<>"," hairless left join '/home/user/codes.csv' code on pet.species = code.species or pet.genus = species.genus"]})})]}),Object(D.jsx)("h3",{children:"Ending queries early, viewing older queries, and exiting"}),Object(D.jsx)("hr",{}),"If a query is taking too long, hit the button next to ",Object(D.jsx)("code",{children:"submit"})," and the query will end and display the results that it found.",Object(D.jsx)("br",{}),"The browser remembers previous queries. In the top-right corner, it will show you which query you are on. You can revisit other queries by hitting the forward and back arrows around the numbers.",Object(D.jsx)("br",{}),"To exit the program, just leave the browser page. The program exits if it goes 3 minutes without being viewed in a browser.",Object(D.jsx)("h3",{children:"Waiting for results to load"}),Object(D.jsx)("hr",{}),"Browsers can take a while to load big results, even when limiting the number of rows. If the results of a query look similar to the results of the previous query, you can confirm that they are new by checkng the query number in the top-right corner, or by reading the query text in the yellow area above the table.",Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),"Another thing that can take a while is files that have tons of columns. The program samples the first 10000 rows to figure out datatypes and this can take a while with very wide files. That process is not yet interuptable by the ",Object(D.jsx)("code",{children:"end query early"})," button.",Object(D.jsx)("h3",{children:"Configuration"}),Object(D.jsx)("hr",{}),"Some settings can be configured by editing the config file ",this.props.configpath,Object(D.jsx)("br",{})," ",Object(D.jsx)("br",{}),Object(D.jsx)("hr",{}),"version ",this.props.version,Object(D.jsx)("hr",{}),this.state.updateMsg,Object(D.jsx)("br",{}),Object(D.jsx)("br",{})]})):Object(D.jsx)(D.Fragment,{})}}]),s}(l.a.Component),Y=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"topBar",children:[Object(D.jsx)(W,{s:this.props.s,updateTopMessage:this.props.updateTopMessage,changeTopDrop:this.props.changeTopDrop,currentQuery:this.props.s.queryHistory[this.props.s.historyPosition],submitQuery:this.props.submitQuery,section:this.props.s.topDropdown,savepath:this.props.s.savepath,sendSocket:this.props.sendSocket,openDirList:this.props.openDirList,saveDirList:this.props.saveDirList,changeSavePath:function(t){return e.props.changeFilePath({type:"save",path:t})},changeOpenPath:function(t){return e.props.changeFilePath({type:"open",path:t})},fileClick:function(t){return e.props.fileClick(t)}}),Object(D.jsx)(R,{dirList:this.props.saveDirList,changeTopDrop:this.props.changeTopDrop,fileClick:function(t){return e.props.fileClick(t)}}),Object(D.jsx)(_,{dirList:this.props.openDirList,changeTopDrop:this.props.changeTopDrop,fileClick:function(t){return e.props.fileClick(t)}}),Object(D.jsx)(z,{showHelp:this.props.showHelp,toggleHelp:this.props.toggleHelp}),Object(D.jsx)("div",{id:"topMessage",className:"topMessage",children:this.props.s.topMessage}),Object(D.jsx)(F,{position:this.props.s.historyPosition,last:this.props.s.queryHistory.length-1,viewHistory:this.props.viewHistory})]})}}]),s}(l.a.Component),F=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(D.jsx)("div",{className:"historyArrows",children:["\u25c0 ","".concat(this.props.position,"/").concat(this.props.last)," \u25b6"].map((function(t,s){return Object(D.jsx)("span",{className:"".concat(1===s?"":"arrow"),onClick:function(){0===s&&e.props.position>1&&e.props.viewHistory(e.props.position-1),2===s&&e.props.position<e.props.last&&e.props.viewHistory(e.props.position+1)},children:t})}))})}}]),s}(l.a.Component),W=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return{nothing:Object(D.jsx)(D.Fragment,{}),saveShow:Object(D.jsx)(A,{dirList:this.props.saveDirList,fileClick:function(t){return e.props.fileClick(t)},changePath:this.props.changeSavePath,changeTopDrop:this.props.changeTopDrop,submitQuery:this.props.submitQuery,currentQuery:this.props.currentQuery,type:"save"}),browseShow:Object(D.jsx)(A,{dirList:this.props.openDirList,updateTopMessage:this.props.updateTopMessage,changeTopDrop:this.props.changeTopDrop,fileClick:function(t){return e.props.fileClick(t)},changePath:this.props.changeOpenPath,type:"open"}),passShow:Object(D.jsx)(J,{s:this.props.s,changeTopDrop:this.props.changeTopDrop,send:this.props.sendSocket})}[this.props.section]}}]),s}(l.a.Component),U=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("span",{className:"dropContent browseFile browseEntry",onDoubleClick:function(){if("open"===e.props.type){var t=document.getElementById("textBoxId"),s=t.value.substring(0,t.selectionStart),o=t.value.substring(t.selectionEnd,1e7);t.value=s+" '"+e.props.path+"' "+o,e.props.updateTopMessage("Added file to query"),e.props.changeTopDrop("nothing")}},children:this.props.path})})}}]),s}(l.a.Component),A=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(r.a)(n)),n.state={innerBoxId:Math.random(),outterBoxId:Math.random(),currentDirId:Math.random()},n}return Object(n.a)(s,[{key:"clickPath",value:function(e){this.props.fileClick({path:e,mode:this.props.type})}},{key:"dirList",value:function(){var e=this;if(this.props.dirList.dirs)return this.props.dirList.dirs.map((function(t){return Object(D.jsx)("span",{className:"dropContent browseDir browseEntry",onClick:function(){return e.clickPath(t)},children:t})}))}},{key:"filelist",value:function(){var e=this;if(this.props.dirList.files)return this.props.dirList.files.map((function(t){return Object(D.jsx)(U,{path:t,changeTopDrop:e.props.changeTopDrop,type:e.props.type,updateTopMessage:e.props.updateTopMessage})}))}},{key:"handleChange",value:function(e){this.props.changePath(e.target.value)}},{key:"saveClick",value:function(){var e=document.getElementById(this.state.currentDirId).value,t=document.getElementById("textBoxId").value;this.props.submitQuery({query:t,fileIO:x|f,savePath:e})}},{key:"render",value:function(){var e=this,t=[];return"open"===this.props.type&&t.push(Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{children:"Double click a file you want to query"}),Object(D.jsx)("br",{})]})),"save"===this.props.type&&t.push(Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{children:"Save queries on page to their own csv file. A number will be added to file name if more than 1."}),Object(D.jsx)("br",{}),Object(D.jsx)("span",{children:"To save, type a file path that ends with '.csv' and hit Enter."})]})),Object(D.jsxs)("div",{id:this.state.outterBoxId,className:"fileSelectShow fileBrowser dropContent",children:[t,Object(D.jsx)("input",{className:"dropContent browseDir browseCurrent",id:this.state.currentDirId,value:this.props.dirList.path,onChange:this.handleChange}),Object(D.jsxs)("div",{className:"browseDirs dropContent",id:this.state.innerBoxId,children:[Object(D.jsx)("span",{className:"dropContent browseDir browseEntry",onClick:function(){e.clickPath(e.props.dirList.parent)},children:Object(D.jsx)("b",{children:"\u2190"})}),this.dirList(),this.filelist()]})]})}},{key:"componentDidUpdate",value:function(){var e=document.getElementById(this.state.innerBoxId),t=document.getElementById(this.state.outterBoxId).offsetHeight;e.offsetHeight>480&&(e.style.height="".concat(t-80,"px"))}},{key:"componentDidMount",value:function(){var e=this,t=document.getElementById(this.state.currentDirId);t.addEventListener("keyup",(function(s){if("Enter"===s.key){var o=t.value;".csv"===o.substr(o.length-4)?e.saveClick():e.clickPath(e.props.dirList.path)}}))}}]),s}(l.a.Component),R=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"toggleForm",value:function(){this.props.fileClick({path:this.props.dirList.path,mode:"save"}),this.props.changeTopDrop("saveShow")}},{key:"render",value:function(){var e=this;return Object(D.jsx)("button",{className:"topButton dropContent",id:"saveButton",onClick:function(){return e.toggleForm()},children:"Save"})}}]),s}(l.a.Component),_=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"toggleForm",value:function(){this.props.fileClick({path:this.props.dirList.path,mode:"open"}),this.props.changeTopDrop("browseShow")}},{key:"render",value:function(){var e=this;return Object(D.jsx)("button",{className:"topButton dropContent",id:"saveButton",onClick:function(){return e.toggleForm()},children:"Browse Files"})}}]),s}(l.a.Component),z=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var e=this,t="Help";return this.props.showHelp&&(t="Hide Help"),Object(D.jsx)("button",{className:"topButton dropContent helpDrop",id:"saveButton",onClick:function(){return e.props.toggleHelp()},children:t})}}]),s}(l.a.Component),J=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"fileSelectShow dropContent passPopup",children:[Object(D.jsx)("h2",{className:"passPromtText dropContent",children:"Enter encryption password"}),Object(D.jsx)("input",{type:"password",id:"passInput",className:"dropContent"}),Object(D.jsx)("button",{className:"topButton popButton dropContent",onClick:function(){var t=document.getElementById("passInput").value;e.props.s.lastpass=t,e.props.send({type:w,text:t})},children:"Submit"})]})}},{key:"componentDidMount",value:function(){var e=this;document.getElementById("passInput").onkeydown=function(t){13===t.keyCode&&e.props.send({type:w,text:document.getElementById("passInput").value})}}}]),s}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={topMessage:"",topDropdown:"nothing",openDirList:{},saveDirList:{},queryHistory:[""],historyPosition:0,showQuery:Object(D.jsx)(D.Fragment,{}),showHelp:0,notifyUpdate:!0,configpath:"",version:"",sessionId:"",lastpass:""},n.topDropReset=n.topDropReset.bind(Object(r.a)(n)),function(e){var t=new URL("http://localhost:8060/info"),s={info:e.info};return Object.keys(s).forEach((function(e){return t.searchParams.append(e,s[e])})),fetch(t).then((function(e){return e.status>=400?{status:e.status}:e.json()}))}({info:"getState"}).then((function(e){e.history&&n.setState({queryHistory:e.history,historyPosition:e.history.length-1}),e.openDirList&&n.setState({openDirList:e.openDirList}),e.saveDirList&&n.setState({saveDirList:e.saveDirList}),e.version&&n.setState({version:e.version}),"notifyUpdate"in e&&n.setState({notifyUpdate:e.notifyUpdate}),e.configpath&&n.setState({configpath:e.configpath});var t=document.getElementById("textBoxId");null!=t&&(t.value=n.state.queryHistory[n.state.historyPosition].query||"")})),n}return Object(n.a)(s,[{key:"showLoadedQuery",value:function(e){e.status&m?void 0===e.message||""===e.message?(alert("Could not make query or get error message from query engine"),console.log(e)):alert(e.message):e.status&y&&(this.setState({topDropdown:"nothing",showQuery:e.entries.map((function(e){return Object(D.jsx)(q,{table:e,hideColumns:new Int8Array(e.numcols),rows:new Object({col:"",val:"*"})})}))}),p({path:"/info?info=setState",body:{haveInfo:!0,currentQuery:document.getElementById("textBoxId").value,history:this.state.queryHistory,openDirList:this.state.openDirList,saveDirList:this.state.saveDirList}}))}},{key:"submitQuery",value:function(e){var t=this;p({path:"/query/",body:{sessionId:this.state.sessionId||"",query:e.query||"",fileIO:e.fileIO||0,savePath:e.savePath||""}}).then((function(s){s.status&y&&!e.backtrack&&t.setState({historyPosition:t.state.queryHistory.length,queryHistory:t.state.queryHistory.concat({query:s.originalQuery})}),t.showLoadedQuery(s)}))}},{key:"sendSocket",value:function(e){this.ws.send(JSON.stringify(e))}},{key:"viewHistory",value:function(e){this.setState({historyPosition:e});var t=document.getElementById("textBoxId");null!=t&&(t.value=this.state.queryHistory[e].query)}},{key:"topDropReset",value:function(e){var t=this;setTimeout((function(){e.target.matches(".dropContent")||t.setState({topDropdown:"nothing"}),t.state.showHelp&&!e.target.matches(".helpDrop")&&t.setState({showHelp:!1})}),50)}},{key:"changeFilePath",value:function(e){"open"===e.type&&(this.state.openDirList.path=e.path),"save"===e.type&&(this.state.saveDirList.path=e.path),this.forceUpdate()}},{key:"fileClick",value:function(e){var t=this;p({path:"/info?info=fileClick",body:{path:e.path,mode:e.mode,sessionId:this.state.sessionId}}).then((function(e){if(e.mode)switch(e.mode){case"open":t.setState({openDirList:e});break;case"save":t.setState({saveDirList:e})}else t.setState({topMessage:e.error?e.error:"error"})}))}},{key:"render",value:function(){var e=this;return document.addEventListener("click",this.topDropReset),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Y,{s:this.state,updateTopMessage:function(t){return e.setState({topMessage:t})},submitQuery:function(t){return e.submitQuery(t)},viewHistory:function(t){return e.viewHistory(t)},changeTopDrop:function(t){return e.setState({topDropdown:t})},toggleHelp:function(){e.setState({showHelp:1^e.state.showHelp})},showHelp:this.state.showHelp,openDirList:this.state.openDirList,saveDirList:this.state.saveDirList,changeFilePath:function(t){return e.changeFilePath(t)},sendSocket:function(t){return e.sendSocket(t)},fileClick:function(t){return e.fileClick(t)}}),Object(D.jsx)(Q,{version:this.state.version,show:this.state.showHelp,notifyUpdate:this.state.notifyUpdate,configpath:this.state.configpath,toggleHelp:function(){e.setState({showHelp:1^e.state.showHelp})}}),Object(D.jsxs)("div",{className:"querySelect",children:[Object(D.jsx)(C,{s:this.state,showLoadedQuery:function(t){return e.showLoadedQuery(t)},submitQuery:function(t){return e.submitQuery(t)},sendSocket:function(t){return e.sendSocket(t)}}),this.state.showQuery]})]})}},{key:"componentDidMount",value:function(){var e=window.performance.now()+3e4,t=this;this.ws=new WebSocket("ws://localhost:8061/socket/"),console.log(this.ws),this.ws.onopen=function(e){console.log("OPEN")},this.ws.onclose=function(e){console.log("CLOSE"),t.ws=null},this.ws.onmessage=function(s){console.log(s.data);var o=JSON.parse(s.data);switch(o.type){case v:e=window.performance.now()+2e4;break;case O:t.setState({topMessage:o.text});break;case w:t.state.lastpass?(t.sendSocket({type:w,text:t.state.lastpass}),t.state.lastpass=""):t.setState({topDropdown:"passShow"});break;case k:t.setState({sessionId:o.id}),console.log("WS session id: "+t.state.sessionId)}},this.ws.onerror=function(e){console.log("ERROR: "+e.data)},window.setInterval((function(){window.performance.now()>e+2e4&&t.setState({topMessage:"Query Engine Disconnected!"})}),2e3)}},{key:"componentWillMount",value:function(){document.title="CSV Query Tool"}}]),s}(l.a.Component);h.a.render(Object(D.jsx)(Z,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.0dd91176.chunk.js.map