{"version":3,"sources":["utils.js","command.js","display.js","help.js","topbar.js","serviceWorker.js","index.js"],"names":["postRequest","request","req","Request","path","method","mode","cache","redirect","referrer","headers","Headers","body","JSON","stringify","fetch","then","res","status","json","colIndex","queryResults","column","i","colnames","toUpperCase","getUnique","uniqueList","idx","vals","indexOf","push","getWhere","value","subset","parse","ri","length","String","splice","numrows","bit","t","QueryBox","props","state","clicked","e","keyCode","shiftKey","preventDefault","query","this","textbox","submitQuery","arrow","className","onClick","setState","rows","id","placeholder","sendSocket","type","document","getElementById","onkeydown","shiftEnter","React","Component","TableSelectColumns","title","choice","order","hideColumns","toggleColumn","size","contents","Math","min","table","map","name","itemInList","TableSelectRows","secondDrop","firstChoice","secondDropItems","dropAction","dropdowns","firstDropItems","dropItem","concat","sort","TableGrid","tableBodyId","random","tableBodyDivId","tableHeadId","tableHeadDivId","sortWay","ii","way","a","b","aa","bb","types","Number","names","sorter","positions","Array","from","x","info","row","header","tableBodyDom","tableBodyDivDom","tableHeadDom","tableHeadDivDom","windoww","window","innerWidth","tbody","childNodes","bcell","hcell","newWidth","trow","offsetWidth","style","minWidth","margin","maxWidth","offsetHeight","addEventListener","scrollLeft","resize","QueryRender","forceUpdate","col","val","paramlist","funclist","fmtlist","FmtTable","tr","td","showbut","show","Func","fun","usage","params","FuncTable","f","Help","updateMsg","updated","setTimeout","notifyUpdate","url","URL","version","resp","console","log","dat","ok","v","update","href","target","notes","isArray","forEach","note","node","d","ch","addclass","checkupdate","configpath","TopMenuBar","updateTopMessage","changeTopDrop","currentQuery","s","queryHistory","historyPosition","section","topDropdown","savepath","openDirList","saveDirList","changeSavePath","changeFilePath","changeOpenPath","fileClick","dirList","showHelp","toggleHelp","topMessage","position","last","viewHistory","History","TopDropdown","nothing","saveShow","changePath","browseShow","passShow","send","FileSelector","onDoubleClick","qtext","start","substring","selectionStart","end","selectionEnd","Browser","handleChange","bind","innerBoxId","outterBoxId","currentDirId","dirs","clickPath","files","fileIO","savePath","onChange","parent","filelist","innerBox","height","that","event","key","SaveButton","toggleForm","BrowseButton","HelpButton","label","PassPrompt","text","Boolean","location","hostname","match","Main","showQuery","sessionId","topDropReset","Object","keys","searchParams","append","getRequest","history","results","undefined","message","alert","entries","tab","Int8Array","numcols","haveInfo","querySpecs","backtrack","originalQuery","showLoadedQuery","ws","matches","whichPath","bugtimer","performance","now","WebSocket","onopen","onclose","onmessage","data","onerror","setInterval","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.158c5df1.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport function validJson(str) {\n\ttry {\n\t\tJSON.parse(str);\n\t} catch (e) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n\nexport function getRequest(request){\n\tvar url = new URL(\"http://localhost:8060/info\"),\n    params = {info:request.info}\n\tObject.keys(params).forEach(key => url.searchParams.append(key, params[key]))\n\treturn fetch(url)\n\t.then(res=>{if (res.status >= 400) return {status: res.status}; else return res.json()})\n}\nexport function postRequest(request){\n\tvar req = new Request(request.path, {\n\t\tmethod: 'POST',\n\t\tmode: 'cors',\n\t\tcache: \"no-cache\",\n\t\t//credentials: \"same-origin\", // include, *same-origin, omit\n\t\tredirect: 'follow',\n\t\treferrer: \"no-referrer\",\n\t\theaders: new Headers({ \"Content-Type\": \"application/json\", }),\n\t\tbody: JSON.stringify(request.body),\n\t});\n\treturn fetch(req)\n\t.then(res=>{if (res.status >= 400) return {status: res.status}; else return res.json()})\n\t//.then(res =>res);\n\t//.then(res => {console.log(res); return res;});\n\t//.then(res=>{if (validJson(res)) return res.json(); return {err:\"not valid json\",res:res}})\n}\n\nexport function colIndex(queryResults,column){\n\tfor (var i in queryResults.colnames)\n\t\tif (queryResults.colnames[i].toUpperCase() === column.toUpperCase())\n\t\t\treturn i;\n\treturn -1;\n}\n\nexport function sortQuery(queryResults,column,way){\n\tqueryResults.vals.sort(function(a,b){\n\t\t\tvar aa = a[column];\n\t\t\tvar bb = b[column];\n\t\t\tif (queryResults.types[column] === 1 || queryResults.types[column] === 2)\n\t\t\t\treturn way*(Number(aa) > Number(bb) ? 1 : -1);\n\t\t\treturn way*(String(aa) > String(bb) ? 1 : -1);\n\t\t});\n}\n\nexport function getUnique(queryResults,column){\n\tvar uniqueList = [];\n\tvar idx = colIndex(queryResults,column);\n\tif (idx > -1)\n\t\tfor (var i in queryResults.vals)\n\t\t\tif (uniqueList.indexOf(queryResults.vals[i][idx]) < 0)\n\t\t\t\tuniqueList.push(queryResults.vals[i][idx]);\n\treturn uniqueList;\n}\n\nexport function getWhere(queryResults,column,value){\n\tif (value === \"*\") return queryResults;\n\tvar subset = JSON.parse(JSON.stringify(queryResults));\n\tvar idx = colIndex(queryResults,column);\n\tif (idx > -1){\n\t\tvar ri = queryResults.vals.length - 1;\n\t\tfor (var i in queryResults.vals){\n\t\t\tif (queryResults.vals[ri-i][idx] == null ||\n\t\t\t\tString(queryResults.vals[ri-i][idx]).toUpperCase() !== String(value).toUpperCase()){\n\t\t\t\tsubset.vals.splice(ri-i,1);\n\t\t\t\tsubset.numrows--;\n\t\t\t}\n\t\t}\n\t\treturn subset;\n\t} else return null;\n}\n\nexport function generateKeyDiagram(){\n\tconsole.log(\"ok\");\n}\nexport function max(a,b){\n\treturn a>b?a:b;\n}\n\nexport const bit = {\n\tDAT_BLANK      : 0,\n\tDAT_ERROR      : 1,\n\tDAT_GOOD       : 1 << 1,\n\tDAT_BADPATH    : 1 << 2,\n\tDAT_IOERR      : 1 << 3,\n\n\tCON_ERROR      : 1,\n\tCON_CHANGED    : 1 << 1,\n\tCON_UNCHANGED  : 1 << 2,\n\tCON_CHECKED    : 1 << 3,\n\tCON_BLANK      : 0,\n\n\tFP_CWD          : 0,\n\tFP_SERROR       : 1 << 1,\n\tFP_SCHANGED     : 1 << 2,\n\tFP_OERROR       : 1 << 3,\n\tFP_OCHANGED     : 1 << 4,\n\n\tF_CSV           : 1 << 5,\n\tF_JSON          : 1 << 6,\n\tF_OPEN          : 1 << 7,\n\tF_SAVE          : 1 << 8,\n\tF_GCSV          : 1 << 9,\n\n\tSK_MSG          : 0,\n\tSK_PING         : 1,\n\tSK_PONG         : 2,\n\tSK_STOP         : 3,\n\tSK_DIRLIST      : 4,\n\tSK_FILECLICK    : 5,\n\tSK_PASS         : 6,\n\tSK_ID           : 7,\n\n\tT_NULL          : 0,\n\tT_INT           : 1,\n\tT_FLOAT         : 2,\n\tT_DATE          : 3,\n\tT_DURATION      : 4,\n\tT_STRING        : 5,\n\tT_UNKNOWN       : 6,\n\n\n};\n\nexport const t = ['Null', 'Int', 'Float', 'Date', 'Duration', 'Text', 'Unknown', ];\n","import React from 'react';\nimport {bit} from './utils.js';\n\nexport class QueryBox extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {clicked:1}\n\t}\n\tshiftEnter(e){\n\t\tif (e.keyCode === 13 && e.shiftKey) {\n\t\t\te.preventDefault();\n\t\t\tvar query = this.textbox.value;\n\t\t\tthis.props.submitQuery({query : query});\n\t\t}\n\t}\n\trender(){\n\t\tvar arrow = <span className={this.state.clicked===1?\"dim\":\"\"}>{\"\\u25bc\"}</span>\n\t\treturn (\n\t\t\t<div className=\"queryMenuContainer\"> \n\t\t\t\t<div className=\"dropmenu queryMenuDiv\">\n\t\t\t\t\t<div className=\"dropButton queryMenuButton\" onClick={()=>{this.setState({clicked:this.state.clicked^1})}}>\n\t\t\t\t\t\t<h2 className=\"commandtitle\">Enter CSV Query {arrow}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={`dropmenu-content queryTextContainer ${this.state.clicked===1?\"show\":\"\"}`}>\n\t\t\t\t\t<textarea rows=\"10\" className=\"queryTextEntry\" id=\"textBoxId\" placeholder={\n`If running multiple queries, separate them with a semicolon;\nSubmit queries by pressing the button or shift-enter`}>\n\t\t\t\t\t</textarea>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<button className=\"queryRunButton dropContent\" onClick={()=>{\n\t\t\t\t\t\tvar query = this.textbox.value;\n\t\t\t\t\t\tthis.props.submitQuery({query : query});\n\t\t\t\t\t}}>Submit Query</button>\n\t\t\t\t\t<button className=\"queryRunButton\" onClick={()=>{ this.props.sendSocket({type : bit.SK_STOP}); }}>End Query Early</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\tcomponentDidMount(){\n\t\tthis.textbox = document.getElementById(\"textBoxId\");\n\t\tthis.textbox.onkeydown = (e)=>this.shiftEnter(e);\n\t}\n}\n","import React from 'react';\nimport {getUnique,max,getWhere,sortQuery,t} from './utils.js';\n\n//drop down list for what columns to hide\nclass TableSelectColumns extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttitle: this.props.title,\n\t\t}\n\t}\n\titemInList(choice,idx,order){\n\t\tif (choice !== null)\n\t\treturn (\n\t\t\t<option className={`tableButton1${this.props.hideColumns[idx]?\" hiddenColumn\":\"\"}`} key={idx} onClick={()=>this.props.toggleColumn(idx)}>\n\t\t\t\t{choice}\n\t\t\t</option>\n\t\t)\n\t}\n\n\tSelectColumnDropdown(title, size, contents){\n\t\treturn(\n\t\t\t<div className=\"dropmenu tableModDiv\">\n\t\t\t\t<div className=\"dropButton tableModButton\">\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"dropmenu-content absolute-pos tableModDrop\">\n\t\t\t\t<select size={String(size)} className=\"dropSelect\">\n\t\t\t\t\t{contents}\n\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"dropmenu tableModDiv\">\n\t\t\t\t<div className=\"dropButton tableModButton\">\n\t\t\t\t\t{this.props.title}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"dropmenu-content absolute-pos tableModDrop\">\n\t\t\t\t<select size={String(Math.min(20,this.props.table.colnames.length))} className=\"dropSelect\">\n\t\t\t\t\t{this.props.table.colnames.map((name,i)=>this.itemInList(name,i))}\n\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n//drop down list for viewing rows that have a certain value\n//terrible code. rewrite it.\nclass TableSelectRows extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttitle: this.props.title,\n\t\t\tsecondDrop : false,\n\t\t\tfirstChoice : \"\",\n\t\t\tsecondDropItems : [],\n\t\t}\n\t}\n\tdropItem(choice,idx,order){\n\t\tif (choice !== null)\n\t\treturn (\n\t\t\t<option className=\"tableButton1\" key={idx} onClick={()=>{ \n\t\t\t\t\tswitch (order){\n\t\t\t\t\t\tcase 'first':\n\t\t\t\t\t\t\tthis.setState({secondDrop:true,\n\t\t\t\t\t\t\t\t\t\t   firstChoice: choice,\n\t\t\t\t\t\t\t\t\t\t   secondDropItems: getUnique(this.props.table,choice) }); \n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'second':\n\t\t\t\t\t\t\tthis.props.dropAction(this.state.firstChoice,choice);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}}>\n\t\t\t\t{choice}\n\t\t\t</option>\n\t\t)\n\t}\n\trender(){\n\t\tvar dropdowns = [\n\t\t\t\t<select className=\"dropSelect\" size={Math.min(20,this.props.firstDropItems.length)}>\n\t\t\t\t\t{this.props.firstDropItems.map((name,i)=>this.dropItem(name,i,'first'))}\n\t\t\t\t</select>\n\t\t];\n\t\tif (this.state.secondDrop)\n\t\t\tdropdowns.push(\n\t\t\t\t<select className=\"dropSelect\" size={Math.min(20,this.state.secondDropItems.length+1)}>\n\t\t\t\t\t{[\"*\"].concat(this.state.secondDropItems.sort()).map((name,i)=>this.dropItem(name,i,'second'))}\n\t\t\t\t</select>\n\t\t\t);\n\t\treturn (\n\t\t\t<div className=\"dropmenu tableModDiv\">\n\t\t\t\t<div className=\"dropButton tableModButton\">\n\t\t\t\t{this.props.title}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"dropmenu-content absolute-pos tableModDrop\">\n\t\t\t\t{dropdowns}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n//display html table with single query result\nclass TableGrid extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttableBodyId : Math.random(),\n\t\t\ttableBodyDivId : Math.random(),\n\t\t\ttableHeadId : Math.random(),\n\t\t\ttableHeadDivId : Math.random(),\n\t\t\tsortWay : 1\n\t\t}\n\t}\n\tsorter(ii){\n\t\tsortQuery(this.props.table,ii,this.state.sortWay);this.setState({sortWay:this.state.sortWay*-1});\n\t}\n\theader(){\n\t\tvar names = this.props.table.colnames.map((name,ii)=>{\n\t\t\tif (this.props.hideColumns[ii]===0) return (\n\t\t\t<th key={ii} className=\"tableCell\" onClick={()=>this.sorter(ii)}>\n\t\t\t\t{this.props.table.colnames[ii]}\n\t\t\t</th>\n\t\t)});\n\t\tvar positions = Array.from({length:this.props.table.types.length},(x,i)=>i+1);\n\t\tvar info = this.props.table.types.map((name,ii)=>{\n\t\t\tif (this.props.hideColumns[ii]===0) return (\n\t\t\t<td key={ii} className=\"tableCell typeCell\" onClick={()=>this.sorter(ii)}>\n\t\t\t\t{`${positions[ii]} `}\n\t\t\t\t<span className=\"noselect\">\n\t\t\t\t- {t[this.props.table.types[ii]]}\n\t\t\t\t</span>\n\t\t\t</td>\n\t\t)});\n\t\tinfo.push( <td id=\"scrollBuffer\">____</td> );\n\t\treturn[<tr className=\"tableRow\">{names}</tr>,<tr className=\"tableRow\" id=\"typeHeader\">{info}</tr>]\n\t}\n\trow(row,idx){\n\t\treturn( \n\t\t\t<tr key={idx} className=\"tableRow\"> \n\t\t\t\t{row.map((name,idx)=>{ \n\t\t\t\t\tif (this.props.hideColumns[idx]===0) return( <td key={idx} className=\"tableCell\"> {name} </td>) })}\n\t\t\t</tr>\n\t\t)\n\t}\n\trender(){\n\t\tif (this.props.table.vals === null)\n\t\t\tthis.props.table.vals = [];\n\t\treturn(\n\t\t<>\n\t\t\t<div className=\"tableDiv tableHeadDiv\" id={this.state.tableHeadDivId}> \n\t\t\t<table className=\"tableHead\">\n\t\t\t\t<thead id={this.state.tableHeadId}>\n\t\t\t\t{this.header()}\n\t\t\t\t</thead>\n\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div className=\"tableDiv tableBodyDiv\" id={this.state.tableBodyDivId}> \n\t\t\t<table className=\"tableBody\" id={this.state.tableBodyId}>\n\t\t\t\t<tbody>\n\t\t\t\t{this.props.table.vals.map((row,i)=>{return this.row(row,i)})}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t</div>\n\t\t</>\n\t\t)\n\t}\n\tresize(){\n\t\tvar tableBodyDom\t= document.getElementById(this.state.tableBodyId);\n\t\tvar tableBodyDivDom = document.getElementById(this.state.tableBodyDivId);\n\t\tvar tableHeadDom\t= document.getElementById(this.state.tableHeadId);\n\t\tvar tableHeadDivDom = document.getElementById(this.state.tableHeadDivId);\n\t\tvar windoww = window.innerWidth;\n\n\t\t//get header table and body table cells to line up\n\t\tvar tbody = tableBodyDom.childNodes[0];\n\t\tif (tbody.childNodes.length > 0 && tbody.childNodes[0].childNodes.length > 0){\n\t\t\tvar trow = tbody.childNodes[0].childNodes;\n\t\t\tvar bcell, hcell;\n\t\t\tvar newWidth;\n\t\t\tfor (var i in trow){\n\t\t\t\tbcell = trow[i];\n\t\t\t\thcell = tableHeadDom.childNodes[0].childNodes[i];\n\t\t\t\tif (bcell.offsetWidth && hcell.offsetWidth){\n\t\t\t\t\tbcell.style.minWidth = hcell.style.minWidth = `0px`;\n\t\t\t\t\tnewWidth = max(bcell.offsetWidth, hcell.offsetWidth);\n\t\t\t\t\t\tbcell.style.minWidth = hcell.style.minWidth = `${newWidth+1}px`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//give header table and body the right size\n\t\ttableHeadDivDom.style.margin = 'auto';\n\t\ttableHeadDivDom.style.maxWidth =  tableBodyDivDom.style.maxWidth = `${Math.min(tableBodyDom.offsetWidth+15,windoww*1.00)}px`;\n\t\tif (tableBodyDom.offsetHeight <= tableBodyDivDom.offsetHeight)\n\t\t\ttableHeadDivDom.style.maxWidth =  tableBodyDivDom.style.maxWidth = `${Math.min(tableBodyDom.offsetWidth,windoww*1.00)}px`;\n\t\t//make head and body scroll together\n\t\ttableBodyDivDom.addEventListener('scroll',function(){ tableHeadDivDom.scrollLeft = tableBodyDivDom.scrollLeft; });\n\n\t}\n\tcomponentDidUpdate(){ this.resize(); }\n\tcomponentDidMount(){ this.resize(); }\n}\n\n//query results section\nexport class QueryRender extends React.Component {\n\ttoggleColumn(column){\n\t\tthis.props.hideColumns[column] ^= 1;\n\t\tthis.forceUpdate();\n\t}\n\trender(){\n\t\treturn ( \n\t\t<div className=\"viewContainer\">\n\t\t\t<div className=\"tableModifiers\">\n\t\t\t\t<div className=\"tableQuery\"><div> {this.props.table.query} </div>\n\t\t\t\t<TableSelectRows \n\t\t\t\t\ttitle = {\"Show with column value\\u25bc\"}\n\t\t\t\t\tdropAction = {(column,value)=>{this.props.rows.col=column;this.props.rows.val=value;this.forceUpdate();}}\n\t\t\t\t\ttable = {this.props.table}\n\t\t\t\t\tfirstDropItems = {this.props.table.colnames}\n\t\t\t\t/>\n\t\t\t\t<TableSelectColumns\n\t\t\t\t\ttitle = {\"Show/Hide columns\\u25bc\"}\n\t\t\t\t\ttable = {this.props.table}\n\t\t\t\t\thideColumns = {this.props.hideColumns}\n\t\t\t\t\ttoggleColumn = {(i)=>this.toggleColumn(i)}\n\t\t\t\t/>\t\n\t\t\t\t<div className=\"dropmenu tableModDiv\">\n\t\t\t\t\t<div className=\"dropButton tableModButton\">\n\t\t\t\t\t\t<span>Rows: {this.props.table.numrows}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<TableGrid\n\t\t\t\ttable = {getWhere(this.props.table,this.props.rows.col,this.props.rows.val)}\n\t\t\t\thideColumns = {this.props.hideColumns}\n\t\t\t\ttoggleColumn = {(i)=>this.toggleColumn(i)}\n\t\t\t/>\n\t\t</div>\n\t\t)\n\t}\n}\n\n","import React from 'react';\n\nconst paramlist = [\n\t'()',\n\t'(<expression>)',\n\t'(<expression>, <expression>)',\n\t'(<expression>, <2 numbers> or <regex>)',\n\t\"(<expression>, <optional password>)\",\n\t'(<any number of expressions>)',\n\t'(<expression>, <optional decimal places>)',\n\t'(<expression> or *)',\n\t'(<expression>, <format string> or <format code>)',\n];\n\nconst funclist = [\n\n\t[\"sum\" ,\"aggregate sum\",1],\n\t[\"avg\" ,\"aggregate average\",1],\n\t[\"min\" ,\"aggregate minimum\",1],\n\t[\"max\" ,\"aggregate maximum\",1],\n\t[\"count\" ,\"aggregate count\",7],\n\t[\"stdev\" ,\"aggregate sample standard deviation\",1],\n\t[\"stdevp\" ,\"aggregate population standard deviation\",1],\n\t[\"inc\" ,\"number that increments each line\",0],\n\t[\"rand\",\"random number\",0],\n\t[\"abs\" ,\"absolute value\",1],\n\t[\"coalesce\" ,\"first non-null expression\",5],\n\t[\"now\",\"current local datetime\",0],\n\t[\"nowlocal\",\"current local datetime\",0],\n\t[\"nowgm\",\"current GMT datetime\",0],\n\t[\"year\" ,\"year\",1],\n\t[\"month\" ,\"month (1-12)\",1],\n\t[\"monthname\",\"month name\",1],\n\t[\"week\" ,\"week of year (1-52)\",1],\n\t[\"dayname\" ,\"day name\",1],\n\t[\"dayofyear\",\"day of year (1-366)\",1],\n\t[\"dayofmonth\",\"day of month (1-31)\",1],\n\t[\"day\" ,\"day of month (same as dayofmonth)\",1],\n\t[\"dayofweek\",\"day of week (1-7, Sunday=1)\",1],\n\t[\"hour\" ,\"hour (0-23)\",1],\n\t[\"minute\" ,\"minute (0-59)\",1],\n\t[\"second\" ,\"second (0-59)\",1],\n\t[\"format\" ,\"format datetime text\",8],\n\t[\"ceil\",\"round up\",6],\n\t[\"floor\",\"round down\",6],\n\t[\"round\",\"round up or down to nearest\",6],\n\t[\"cos\",\"trig cosine\",1],\n\t[\"sin\",\"trig sine\",1],\n\t[\"tan\",\"trig tangent\",1],\n\t[\"acos\",\"trig inverse cosine\",1],\n\t[\"asin\",\"trig inverse sine\",1],\n\t[\"atan\",\"trig inverse tangent\",1],\n\t[\"exp\",\"e to the power of number\",1],\n\t[\"pow\",\"1st expression to the power of second expression\",2],\n\t[\"log\",\"log base e\",1],\n\t[\"log2\",\"log base 2\",1],\n\t[\"log10\",\"log base 10\",1],\n\t[\"sqrt\",\"square root\",1],\n\t[\"cbrt\",\"cube root\",1],\n\t[\"upper\",\"upper case\",1],\n\t[\"lower\",\"lower case\",1],\n\t[\"len\",\"lenth of text\",1],\n\t[\"substr\",\"substring from indexes or pattern matching\",3],\n\t[\"sip\",\"sip hash (outputs a 64bit number)\",1],\n\t[\"md5\",\"md5 hash in base64\",1],\n\t[\"sha1\",\"sha1 hash in base64\",1],\n\t[\"sha256\",\"sha256 hash in base64\",1],\n\t[\"string\",\"convert datatype to text\",1],\n\t[\"int\",\"convert datatype to integer\",1],\n\t[\"float\",\"convert datatype to floating point number\",1],\n\t[\"date\",\"convert datatype to datetime\",1],\n\t[\"duration\",\"convert datatype to duration\",1],\n\t[\"encrypt\" ,\"encrypt\",4],\n\t[\"decrypt\" ,\"decrypt\",4],\n\t[\"base64_encode\",\"encode to bas64\",1],\n\t[\"base64_decode\",\"decode from base64\",1],\n\n]\n\nconst fmtlist = [\n\t[1,  \"mm/dd/yy\",\"%m/%d/%y\"],\n\t[101,\"mm/dd/yyyy\",\"%m/%d/%Y\"],\n\t[2,  \"yy.mm.dd\",\"%y.%m.%d\"],\n\t[102,\"yyyy.mm.dd\",\"%Y.%m.%d\"],\n\t[3,  \"dd/mm/yy\",\"%d/%m/%y\"],\n\t[103,\"dd/mm/yyyy\",\"%d/%m/%Y\"],\n\t[4,  \"dd.mm.yy\",\"%d.%m.%y\"],\n\t[104,\"dd.mm.yyyy\",\"%d.%m.%Y\"],\n\t[5,  \"dd-mm-yy\",\"%d-%m-%y\"],\n\t[105,\"dd-mm-yyyy\", \"%d-%m-%Y\"],\n\t[6,  \"dd Mon yy\",\"%d %b %y\"],\n\t[106,\"dd Mon yyyy\",\"%d %b %Y\"],\n\t[7,  \"Mon dd, yy\",\"%b %d, %y\"],\n\t[107,\"Mon dd, yyyy\",\"%b %d, %Y\"],\n\t[8,  \"hh:mi:ss\",\"%I:%M:%S\"],\n\t[108,\"hh:mi:ss\",\"%I:%M:%S\"],\n\t[9,  \"Mon dd yy hh:mi:ss:mmmmAM\",\"%b %d %y %I:%M:%S:mmmm%p\"],\n\t[109,\"Mon dd yyyy hh:mi:ss:mmmmAM\",\"%b %d %Y %I:%M:%S:mmmm%p\"],\n\t[10, \"mm-dd-yy\",\"%m-%d-%y\"],\n\t[110,\"mm-dd-yyyy\",\"%m-%d-%Y\"],\n\t[11, \"yy/mm/dd\",\"%y/%m/%d\"],\n\t[111,\"yyyy/mm/dd\",\"%Y/%m/%d\"],\n\t[12, \"yymmdd\",\"%y%m%d\"],\n\t[112,\"yyyymmdd\",\"%Y%m%d\"],\n\t[13, \"dd Mon yy hh:mi:ss:mmm(24h)\",\"%d %b %y %H:%M:%S:mmm\"],\n\t[113,\"dd Mon yyyy hh:mi:ss:mmm(24h)\",\"%d %b %Y %H:%M:%S:mmm\"],\n\t[14, \"hh:mi:ss:mmm(24h)\",\"%H:%M:%S:mmm\"],\n\t[114,\"hh:mi:ss:mmm(24h)\",\"%H:%M:%S:mmm\"],\n\t[15, \"yy-mm-dd\",\"%y-%m-%d\"],\n\t[115, \"yyyy-mm-dd\",\"%Y-%m-%d\"],\n\t[20, \"yy-mm-dd hh:mi:ss(24h)\",\"%y-%m-%d %H:%M:%S\"],\n\t[120,\"yyyy-mm-dd hh:mi:ss(24h)\",\"%Y-%m-%d %H:%M:%S\"],\n\t[21, \"yy-mm-dd hh:mi:ss.mmm(24h)\",\"%y-%m-%d %H:%M:%S.mmm\"],\n\t[121,\"yyyy-mm-dd hh:mi:ss.mmm(24h)\",\"%Y-%m-%d %H:%M:%S.mmm\"],\n\t[126,\"yyyy-mm-ddThh:mi:ss.mmm (no Spaces)\",\"%Y-%m-%dT%H:%M:%S.mmm\"],\n\t[127,\"yyyy-mm-ddThh:mi:ss.mmmZ (no Spaces)\",\"%Y-%m-%dT%H:%M:%S.mmmZ\"],\n\t[130,\"dd Mon yyyy hh:mi:ss:mmmAM\",\"%d %b %Y %I:%M:%S:mmm%p\"],\n\t[131,\"dd/mm/yyyy hh:mi:ss:mmmAM\",\"%d/%b/%Y %I:%M:%S:mmm%p\"],\n\t\t//non standardized additions\n\t[119,\"Mon dd yyyy hh:mi:ssAM\",\"%b %d %Y %I:%M:%S%p\"],\n\t[140,\"dd Mon yyyy hh:mi:ssAM\",\"%d %b %Y %I:%M:%S%p\"],\n\t[141,\"dd/mm/yyyy hh:mi:ssAM\",\"%d/%b/%Y %I:%M:%S%p\"],\n\t[136,\"yyyy-mm-ddThh:mi:ss (no Spaces)\",\"%Y-%m-%dT%H:%M:%S\"],\n\t[137,\"yyyy-mm-ddThh:mi:ssZ (no Spaces)\",\"%Y-%m-%dT%H:%M:%SZ\"],\n];\n\nclass FmtTable extends React.Component {\n\tconstructor(){\n\t\tsuper();\n\t\tthis.table = (\n\t\t\t<table className='helpTable helpDrop'>\n\t\t\t\t<th className='helpTable helpDrop'>Format code</th><th className='helpTable helpDrop'>Resulting format</th><th className='helpTable helpDrop'>Corresonding format string</th>\n\t\t\t\t{fmtlist.map((tr)=>{ return(\n\t\t\t\t\t<tr>{tr.map( td => <td className='helpTable helpDrop'>{td}</td> )}</tr>\n\t\t\t\t\t);})}\n\t\t\t</table>\n\t\t);\n\t\tthis.showbut = ( <button onClick={()=>{this.show=true;}} >Show list of preset date formats</button> );\n\t\tthis.show = false;\n\t}\n\trender(){\n\t\treturn this.show === true ? this.table : this.showbut;\n\t}\n};\n\nconst Func = ({fun,usage,params}) => {\n\treturn (<><tr><td className='helpTable helpDrop'>{fun}</td><td className='helpTable helpDrop'>{paramlist[params]}</td><td className='helpTable helpDrop'>{usage}</td></tr></>);\n}\nclass FuncTable extends React.Component {\n\tconstructor(){\n\t\tsuper();\n\t\tthis.table =  (\n\t\t\t<table className='helpTable helpDrop'>\n\t\t\t\t<th className='helpTable helpDrop'>Function</th><th className='helpTable helpDrop'>parameters</th><th className='helpTable helpDrop'>description</th>\n\t\t\t\t{funclist.map((f)=>{return(<Func fun={f[0]} usage={f[1]} params={f[2]}/>);})}\n\t\t\t</table>\n\t\t);\n\t\tthis.showbut = ( <button onClick={()=>{this.show=true;}} >Show list of functions</button> );\n\t\tthis.show = false;\n\t}\n\trender(){\n\t\treturn this.show === true ? this.table : this.showbut;\n\t}\n};\n\nexport class Help extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tupdateMsg : \"\",\n\t\t\tupdated : false,\n\t\t};\n\t}\n\tcheckupdate(){\n\t\tsetTimeout(()=>{\n\t\t\tif (this.state.updated || !this.props.notifyUpdate) return;\n\t\t\tlet url = new URL(`https://davosaur.com/csv/index.php?d=version2&c=${this.props.version}`);\n\t\t\tlet resp = fetch(url);\n\t\t\tconsole.log(resp);\n\t\t\tresp.then(dat => { if (dat.ok){\n\t\t\t\tdat.json().then(v => {\n\t\t\t\t\tif (this.props.version !== '' && v.version > this.props.version){\n\t\t\t\t\t\tlet update = [<a href='https://davosaur.com/csv' target='_blank'>New version available</a> ,':\\t', v.version];\n\t\t\t\t\t\tif (v.notes){\n\t\t\t\t\t\t\tif (Array.isArray(v.notes)){\n\t\t\t\t\t\t\t\tupdate.push(<br/>);\n\t\t\t\t\t\t\t\tupdate.push(<br/>);\n\t\t\t\t\t\t\t\tv.notes.forEach(note => { update.push(<li>{note}</li>); });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tupdate = update.concat([<br/>,<br/>,v.notes]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState({ updateMsg : update });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}})\n\t\t\tthis.setState({ updated : true });\t\n\t\t},1000)\n\t}\n\taddclass(node){\n\t\tif (!node) return;\n\t\tif (!node.d){\n\t\t\tnode.className += ' helpDrop';\n\t\t\tnode.d = true;\n\t\t}\n\t\tnode.childNodes.forEach(ch=>this.addclass(ch));\n\t}\n\trender(){\n\t\tif (!this.props.show) return <></>\n\t\tthis.checkupdate();\n\t\tsetTimeout(()=>{\n\t\t\tthis.addclass(document.getElementById('helpBox'));\n\t\t}, 50);\n\t\treturn ( \n\t\t\t<div className=\"helpBox\" id=\"helpBox\">\n\t\t\t<h3>What this software does</h3>\n\t\t\t<hr/>\n\t\t\t\tRun <code>select</code> queries on csv files, display the results, and save to new csv files. It can handle big csv files that are too big for other programs.\n\t\t\t<br/>\n\t\t\tIt will show you the first several hundred results in the browser, with 2 options for viewing certain rows or columns. You can click on a column header to sort the displayed results by that column.\n\t\t\t<h3>How to save files</h3>\n\t\t\t<hr/>\n\t\t\t\tAfter running a query, hit the save button. Navigate to where you want to save, type in the file name, and hit the save button to the right. All the queries on the page will run again, but this time they will be saved to csv files. If there are multiple queries on the page, you still only need to specify one file and a number will be added to the filename for each one. The program will infer whether or not to output a header unless you override it with an option. To always output header, add <code>oh</code> to the beginning of the query. To never output header, add <code>noh</code>.\n\t\t\t<h3>How to use the query language</h3>\n\t\t\t<hr/>\n\t\t\tThis program uses a custom version of SQL loosely based on TSQL. Some features like Unions, Subqueries, and @variables are not implemented yet.\n\t\t\t<br/>\n\t\t\t<blockquote>\n\t\t\t\t<h4>Specifying a file</h4>\n\t\t\t\tClick <code>Browse Files</code> to find files, and double click one to add it to the query.\n\t\t\t\t\t<br/>\n\t\t\t\tFile paths can be saved for later use by running an <code>add {\"<alias> <filepath>\"}</code> command. You may add file format options (described in the next section) after the filepath so save those too. The <code>drop {\"<alias>\"}</code> command only deletes the alias, not the file. To view all aliases, type <code>show tables</code>.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExample of specifying a file by filename and then by saved name:\n\t\t\t\t\t<br/>\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\tselect * from '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tadd pets '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect * from pets\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tdrop pets\n\t\t\t\t</code></blockquote>\n\t\t\t\t<h4>Specifying csv delimiters and file header</h4>\n\t\t\t\tThese characters can be added to the beginning of a query or after the file path to specify file format details: <code>nh</code>, <code>h</code>, <code>ah</code>, <code>s</code>, <code>t</code>, and <code>p</code>. The characters <code>nh</code>, <code>h</code>, and <code>ah</code> mean 'no header', 'header', and 'auto header' respectively. Default behavior is to treat the first line of the file as a header. <code>ah</code> will guess if there is a header based on whether or not the first row contains numbers. <code>s</code>, <code>t</code>, and <code>p</code> mean the delimiter is 'spaces', 'tabs', and 'pipes' respectively, with pipes being this character: <code>|</code>. Default delimiter is commas. See examples in the next section.\n\t\t\t\t<h4>Selecting some columns</h4>\n\t\t\t\tColumns can be specified by name or number. Select column numbers by prefacing the number with <code>c</code>, or by using a plain unquoted number if putting a <code></code> in front of the whole query. Commas between selections are optional. Result columns can be renamed with the <code>as</code> keyword.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExample: selecting columns 1-3, dogs, and cats from a file with no header<br/>\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\tnh select c1, c2 as 'food', c3, dogs, cats from '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect c1 c2 c3 dogs cats from 'C:\\\\users\\\\dave\\\\pets.csv' nh\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tc nh select 1 2 3 dogs cats from 'C:\\\\users\\\\dave\\\\pets.csv'\n\t\t\t</code></blockquote>\n\t\t\t\t<h4>Selecting all columns</h4>\n\t\t\t\t<code>select *</code> works how you'd expect. If you don't specify any values at all, it will also select all. It will also select all if you skip the <code>select from</code> part altogether as long as there are quotes around the file path.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExamples:\n\t\t\t\t\t<br/>\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\tselect * from '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect from '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t'/home/user/pets.csv'\n\t\t\t\t</code></blockquote>\n\t\t\t\t<h4>Selecting more complex expressions</h4>\n\t\t\t\tUse <code>+ - * / %</code> operators to add, subtract, multiply, divide, and modulus expressions. You can combine them with parentheses. You can also use case expressions.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExamples:\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\tselect birthdate+'3 weeks', c1*c2, c1/c2, c1-c2, c1%2, (c1-23)*(c2+34) from '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t{\"select case when c1*2<10 then dog when c1*10>=10.2 then cat else monkey end from '/home/user/pets.csv'\"}\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect case c1 / c4 when (c3+c3)*2 then dog when c1*10 then cat end from '/home/user/pets.csv'\n\t\t\t\t</code></blockquote>\n\t\t\t\t<h4>Expression Aliases</h4>\n\t\t\t\tBegin a query with <code>{\"with <expression> as <alias>\"}</code> to use that value throughout the query. Separate aliases with <code>,</code> or <code>and</code>.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExample:\n\t\t\t\t\t<br/>\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\twith age*7 as dogyears, 'Mr.'+name as dogname select dogname, dogyears from '/home/user/pets.csv' order by dogyears\n\t\t\t</code></blockquote>\n\t\t\t\t<h4>Functions</h4>\n\t\t\t\t\t<blockquote>\n\t\t\t\t\t\t<FuncTable/>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tAggregate functions can be used with a <code>group by</code> clause and group by as many values as you want. Without a <code>group by</code> clause, they will aggregate everything into a single row.\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\tEncryption function only guarantees a unique nonce for every value encrypted while the program is running. Uniqueness cannot be guaranteed between restarts, so avoid using the same password in different sessions. Encryption function uses the chacha20 stream cipher and a 32 bit MtE authenticator. It returns an empty value if ciphertext has been tampered with. It does not hide the length of a value, so it may be best to use other security solutions when possible. If no password is supplied, the program will prompt you for one.\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tMath functions like asin and log return an empty value when not a real number, such as <code>log(0)</code> or <code>asin(100)</code>. To return <code>nan</code>, <code>inf</code>, or <code>-inf</code> instead, add the option <code>nan</code> to the beginning of the query. Return value will still be empty if function is called on a null value.\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tFormat function uses the type of date format string described by the <a href='https://linux.die.net/man/3/strftime' target='_blank'>Linux Manual</a>, with the addition of <code>mmm</code> for milliseconds. It can also take the format code for a preset format from the following table:\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<FmtTable/>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t</blockquote>\n\t\t\t\t<h4>Selecting rows or aggregates with a distinct value</h4>\n\t\t\t\tTo only return rows with a distinct value, put the <code>distinct</code> keyword in front of the expression that you want to be distinct. Put <code>hidden</code> after <code>distinct</code> if you don't want that value to show up as a result column.\n\t\t\t\t\t<br/><br/>\n\t\t\t\tTo calculate aggregate function of distinct values, put the <code>distinct</code> keyword in the function call.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExamples:\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\tselect distinct c3 from '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect distinct hidden dogtypes, fluffiness from '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect count(distinct species) from '/home/user/pets.csv'\n\t\t\t\t</code></blockquote>\n\t\t\t\t<h4>Selecting a number of rows</h4>\n\t\t\t\t\tUse the <code>top</code> keyword after <code>select</code>, or <code>limit</code> at the end of the query. Be careful not to confuse the number after <code>top</code> for part of an expression.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExamples:\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\tselect top 100 c1 c2 c3 dogs cats from '/home/user/pets.csv'\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect c1 c2 c3 dogs cats from '/home/user/pets.csv' limit 100\n\t\t\t\t</code></blockquote>\n\t\t\t\t<h4>Selecting rows that match a certain condition</h4>\n\t\t\t\tUse any combinatin of <code>{\"<expression> <relational operator> <expression>\"}</code>, parentheses, <code>and</code>, <code>or</code>, <code>xor</code>, <code>not</code>, <code>in</code>, and <code>between</code>. Dates are handled nicely, so <code>May 18 1955</code> is the same as <code>5/18/1955</code>. Empty entries can be compared against the keyword <code>null</code>. The <code>in</code> operator can be used with a subquery, though correlated subqueries are not yet supported.\n\t\t\t\t\t<br/><br/>\n\t\t\t\tValid relational operators are <code>=</code>,  <code>!=</code>,  <code>{\"<>\"}</code>,  <code>{\">\"}</code>,  <code>{\"<\"}</code>,  <code>{\">=\"}</code>,  <code>{\"<=\"}</code>, <code>like</code>, <code>in</code>, and <code>between</code>. <code>!</code> is evaluated the same as <code>not</code>, and can be put in front of a relational operator or a whole comparison.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExamples:\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\t{\"select from '/home/user/pets.csv' where dateOfBirth < 'april 10 1980' or age between (c3-19)*1.2 and 30\"}\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t{\"select from '/home/user/pets.csv' where (c1 < c13 or fuzzy = very) and not (c3 = null or weight >= 50 or name not like 'a_b%')\"}\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect from '/home/user/pets.csv' where c1 in (2,3,5,7,11,13,17,19,23)\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect from '/home/user/pets.csv' where null not in (c1,c2,c3)\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect from '/home/user/pets.csv' where species not in (select species from behaviors.csv where prey != humans)\n\t\t\t\t</code></blockquote>\n\t\t\t\t<h4>Sorting results</h4>\n\t\t\t\t\tUse <code>order by</code> at the end of the query, followed by any number of expressions, each followed optionally by <code>asc</code>. Sorts by descending values unless <code>asc</code> is specified.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExamples:\n\t\t\t\t<blockquote><code>\n\t\t\t\t\t\tselect from '/home/user/pets.csv' where dog = husky order by age, fluffiness asc\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect from '/home/user/pets.csv' order by c2*c3\n\t\t\t\t</code></blockquote>\n\t\t\t\t<h4>Joining Files</h4>\n\t\t\t\tAny number of files can be joined together. <code>left</code> and <code>inner</code> joins are allowed, default is <code>inner</code>. Each file needs an alias. Join conditions can have as many comparisions as you want, and is most efficient when the first comparision las the lowest cardinality.\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tExamples:\n\t\t\t\t\t<blockquote><code>\n\t\t\t\t\t\tselect pet.name, pet.species, code.c1 from '/home/user/pets.csv' pet\n\t\t\t\t\t\t\t left join '/home/user/codes.csv' code\n\t\t\t\t\t\t\t on pet.species = code.species order by pet.age\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tselect pet.name, code.c1, fur.flufftype from '/home/user/pets.csv' pet\n\t\t\t\t\t\t\t inner join '/home/user/fur.csv' fur\n\t\t\t\t\t\t\t on pet.fluffiness = fur.fluff and fur.flufftype {\"<>\"} hairless\n\t\t\t\t\t\t\t left join '/home/user/codes.csv' code\n\t\t\t\t\t\t\t on pet.species = code.species or pet.genus = species.genus\n\t\t\t\t\t</code></blockquote>\n\t\t\t</blockquote>\n\t\t\t<h3>Ending queries early, viewing older queries, and exiting</h3>\n\t\t\t<hr/>\n\t\t\t\tIf a query is taking too long, hit the button next to <code>submit</code> and the query will end and display the results that it found.\n\t\t\t<br/>\n\t\t\tThe browser remembers previous queries. In the top-right corner, it will show you which query you are on. You can revisit other queries by hitting the forward and back arrows around the numbers.\n\t\t\t<br/>\n\t\t\tTo exit the program, just leave the browser page. The program exits if it goes 3 minutes without being viewed in a browser.\n\t\t\t<h3>Waiting for results to load</h3>\n\t\t\t<hr/>\n\t\t\tBrowsers can take a while to load big results, even when limiting the number of rows. If the results of a query look similar to the results of the previous query, you can confirm that they are new by checkng the query number in the top-right corner, or by reading the query text in the yellow area above the table.\n\t\t\t<br/><br/>\n\t\t\t\tAnother thing that can take a while is files that have tons of columns. The program samples the first 10000 rows to figure out datatypes and this can take a while with very wide files. That process is not yet interuptable by the <code>end query early</code> button.\n\t\t\t<h3>Configuration</h3>\n\t\t\t<hr/>\n\t\t\tSome settings can be configured by editing the config file {this.props.configpath}\n\t\t\t<br/> <br/>\n\t\t\t<hr/>\n\t\t\tversion {this.props.version}\n\t\t\t<hr/>\n\t\t\t{this.state.updateMsg}\n\t\t\t<br/><br/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from 'react';\nimport {bit} from './utils.js';\n\nexport class TopMenuBar extends React.Component {\n\trender(){\n\n\t\treturn (\n\t\t\t<div className=\"topBar\">\n\t\t\t<TopDropdown\n\t\t\t\tupdateTopMessage = {this.props.updateTopMessage}\n\t\t\t\tchangeTopDrop = {this.props.changeTopDrop}\n\t\t\t\tcurrentQuery = {this.props.s.queryHistory[this.props.s.historyPosition]}\n\t\t\t\tsubmitQuery = {this.props.submitQuery}\n\t\t\t\tsection = {this.props.s.topDropdown}\n\t\t\t\tsavepath = {this.props.s.savepath}\n\t\t\t\tsendSocket = {this.props.sendSocket}\n\t\t\t\topenDirList = {this.props.openDirList}\n\t\t\t\tsaveDirList = {this.props.saveDirList}\n\t\t\t\tchangeSavePath = {(path)=>this.props.changeFilePath({type:\"save\",path:path})}\n\t\t\t\tchangeOpenPath = {(path)=>this.props.changeFilePath({type:\"open\",path:path})}\n\t\t\t\tfileClick = {(request)=>this.props.fileClick(request)}\n\t\t\t/>\n\t\t\t<SaveButton\n\t\t\t\tdirList = {this.props.saveDirList}\n\t\t\t\tchangeTopDrop = {this.props.changeTopDrop}\n\t\t\t\tfileClick = {(request)=>this.props.fileClick(request)}\n\t\t\t/>\n\t\t\t<BrowseButton\n\t\t\t\tdirList = {this.props.openDirList}\n\t\t\t\tchangeTopDrop = {this.props.changeTopDrop}\n\t\t\t\tfileClick = {(request)=>this.props.fileClick(request)}\n\t\t\t/>\n\t\t\t<HelpButton\n\t\t\t\tshowHelp = {this.props.showHelp}\n\t\t\t\ttoggleHelp = {this.props.toggleHelp}\n\t\t\t/>\n\t\t\t<div id=\"topMessage\" className=\"topMessage\">{this.props.s.topMessage}</div>\n\t\t\t<History\n\t\t\t\tposition = {this.props.s.historyPosition} \n\t\t\t\tlast = {this.props.s.queryHistory.length - 1}\n\t\t\t\tviewHistory = {this.props.viewHistory}\n\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass History extends React.Component {\n\trender(){\n\t\treturn(\n\t\t\t<div className=\"historyArrows\">\n\t\t\t{[' ',`${this.props.position}/${this.props.last}`,' '].map((v,i)=> <span className={`${i===1?\"\":\"arrow\"}`} onClick={()=>{\n\t\t\t\tif (i === 0 && this.props.position > 1)\n\t\t\t\t\tthis.props.viewHistory(this.props.position - 1);\n\t\t\t\tif (i === 2 && this.props.position < this.props.last)\n\t\t\t\t\tthis.props.viewHistory(this.props.position + 1);\n\t\t\t}}>{v}</span>)}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass TopDropdown extends React.Component {\n\n\trender(){\n\t\tvar dropdownContents = {\n\t\t\tnothing : <></>,\n\t\t\tsaveShow : ( <Browser\n\t\t\t\t\t\t\tdirList = {this.props.saveDirList}\n\t\t\t\t\t\t\tfileClick = {(request)=>this.props.fileClick(request)}\n\t\t\t\t\t\t\tchangePath = {this.props.changeSavePath}\n\t\t\t\t\t\t\tchangeTopDrop = {this.props.changeTopDrop}\n\t\t\t\t\t\t\tsubmitQuery = {this.props.submitQuery}\n\t\t\t\t\t\t\tcurrentQuery = {this.props.currentQuery}\n\t\t\t\t\t\t\ttype = {\"save\"}\n\t\t\t\t\t\t/> ),\n\t\t\tbrowseShow : ( <Browser\n\t\t\t\t\t\t\tdirList = {this.props.openDirList}\n\t\t\t\t\t\t\tupdateTopMessage = {this.props.updateTopMessage}\n\t\t\t\t\t\t\tchangeTopDrop = {this.props.changeTopDrop}\n\t\t\t\t\t\t\tfileClick = {(request)=>this.props.fileClick(request)}\n\t\t\t\t\t\t\tchangePath = {this.props.changeOpenPath}\n\t\t\t\t\t\t\ttype = {\"open\"}\n\t\t\t\t\t\t/> ),\n\t\t\tpassShow: <PassPrompt\n\t\t\t\t\t\t\tchangeTopDrop = {this.props.changeTopDrop}\n\t\t\t\t\t\t\tsend = {this.props.sendSocket}\n\t\t\t\t\t\t/>\n\n\t\t}\n\t\treturn dropdownContents[this.props.section];\n\t}\n}\n\n//each csv file line in file browser\nclass FileSelector extends React.Component {\n\trender() {\n\t\treturn (\n\t\t<>\n\t\t\t<span className=\"dropContent browseFile browseEntry\" onDoubleClick={()=>{\n\t\t\t\tif (this.props.type === 'open') {\n\t\t\t\t\tvar qtext = document.getElementById(\"textBoxId\");\n\t\t\t\t\tvar start = qtext.value.substring(0,qtext.selectionStart);\n\t\t\t\t\tvar end = qtext.value.substring(qtext.selectionEnd, 10000000);\n\t\t\t\t\tqtext.value = start +\" '\"+ this.props.path +\"' \"+ end;\n\t\t\t\t\tthis.props.updateTopMessage(\"Added file to query\");\n\t\t\t\t\tthis.props.changeTopDrop(\"nothing\");\n\t\t\t\t}\n\t\t\t}} \n\t\t\t>{this.props.path}</span>\n\t\t</>\n\t\t)\n\t}\n}\n//file browser\nclass Browser extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.state = {\n\t\t\tinnerBoxId : Math.random(),\n\t\t\toutterBoxId : Math.random(),\n\t\t\tcurrentDirId : Math.random(),\n\t\t};\n\t}\n\tclickPath(path){\n\t\t//this.props.send({Type : bit.SK_FILECLICK, Text : path, Mode : this.props.type});\n\t\tthis.props.fileClick({path : path, mode : this.props.type});\n\t}\n\tdirList(){\n\t\tif (this.props.dirList.dirs) return (\n\t\tthis.props.dirList.dirs.map(path => <span className=\"dropContent browseDir browseEntry\" onClick={()=>this.clickPath(path)}>{path}</span>)\n\t\t);\n\t}\n\tfilelist(){\n\t\tif (this.props.dirList.files) return (\n\t\tthis.props.dirList.files.map(path => <FileSelector \n\t\t\tpath={path}\n\t\t\tchangeTopDrop = {this.props.changeTopDrop}\n\t\t\ttype={this.props.type}\n\t\t\tupdateTopMessage = {this.props.updateTopMessage}\n\t\t/>)\n\t\t);\n\t}\n\thandleChange(e){\n\t\tthis.props.changePath(e.target.value);\n\t}\n\n\trender(){\n\t\tvar header = [];\n\t\tif (this.props.type === \"open\")\n\t\t\theader.push( <><span>Double click a file you want to query</span><br/></> );\n\t\tif (this.props.type === \"save\")\n\t\t\theader.push( <><span>Save queries on page to their own csv file. A number will be added to file name if more than 1.</span>\n\t\t\t\t<button className=\"saveButton topButton popButton dropContent\" onClick={()=>{\n\t\t\t\t\tvar path = document.getElementById(this.state.currentDirId).value;\n\t\t\t\t\tvar qtext = document.getElementById(\"textBoxId\").value;\n\t\t\t\t\tthis.props.submitQuery({query : qtext, fileIO : bit.F_SAVE|bit.F_CSV, savePath : path});\n\t\t\t\t}}>save</button><br/></> );\n\n\t\treturn (\n\t\t<div id={this.state.outterBoxId} className=\"fileSelectShow fileBrowser dropContent\">\n\t\t\t{header}\n\t\t\t<input className=\"dropContent browseDir browseCurrent\" id={this.state.currentDirId} value={this.props.dirList.path} onChange={this.handleChange}/>\n\t\t\t<div className=\"browseDirs dropContent\" id={this.state.innerBoxId}>\n\t\t\t<span className=\"dropContent browseDir browseEntry\" onClick={()=>{ this.clickPath(this.props.dirList.parent);\n\t\t\t}}><b></b></span>\n\t\t\t{this.dirList()}\n\t\t\t{this.filelist()}\n\t\t\t</div>\n\t\t</div>\n\t\t)\n\t}\n\tcomponentDidUpdate(){\n\t\tconst innerBox = document.getElementById(this.state.innerBoxId);\n\t\tconst outterBox = document.getElementById(this.state.outterBoxId);\n\t\tvar size = outterBox.offsetHeight;\n\t\tif (innerBox.offsetHeight > 480){\n\t\t\tinnerBox.style.height = `${size-80}px`;\n\t\t}\n\t}\n\tcomponentDidMount(){\n\t\tvar that = this;\n\t\tconst dirText = document.getElementById(this.state.currentDirId);\n\t\tdirText.addEventListener(\"keyup\", function(event) {\n\t\t\tif (event.key === \"Enter\") {\n\t\t\t\tthat.clickPath(that.props.dirList.path)\n\t\t\t}\n\t\t});\n\t}\n}\nclass SaveButton extends React.Component {\n\ttoggleForm(){\n\t\tthis.props.fileClick({path : this.props.dirList.path, mode : \"save\"});\n\t\tthis.props.changeTopDrop(\"saveShow\");\n\t}\n\trender(){\n\t\treturn( <button className=\"topButton dropContent\" id=\"saveButton\" onClick={()=>this.toggleForm()}>Save</button>)\n\t}\n}\n\nclass BrowseButton extends React.Component {\n\ttoggleForm(){\n\t\tthis.props.fileClick({path : this.props.dirList.path, mode : \"open\"});\n\t\tthis.props.changeTopDrop(\"browseShow\");\n\t}\n\trender(){\n\t\treturn( <button className=\"topButton dropContent\" id=\"saveButton\" onClick={()=>this.toggleForm()}>Browse Files</button>)\n\t}\n}\n\nclass HelpButton extends React.Component {\n\trender(){\n\t\tvar label = \"Help\";\n\t\tif (this.props.showHelp) label = \"Hide Help\";\n\t\treturn( <button className=\"topButton dropContent helpDrop\" id=\"saveButton\" onClick={()=>this.props.toggleHelp()}>{label}</button>)\n\t}\n}\n\nclass PassPrompt extends React.Component {\n\trender() {\n\t\t//<div className=\"passPopup\">\n\t\treturn (\n\t\t<div className=\"fileSelectShow dropContent passPopup\">\n\t\t<h2 className=\"passPromtText dropContent\">Enter encryption password</h2>\n\t\t<input type=\"password\" id=\"passInput\" className=\"dropContent\"></input>\n\t\t<button className=\"topButton popButton dropContent\" onClick={()=>{\n\t\t\tthis.props.send({type : bit.SK_PASS, text : document.getElementById(\"passInput\").value});\n\t\t\t}} >Submit</button>\n\t\t</div>\n\t\t);\n\t}\n\tcomponentDidMount(){\n\t\tvar passbox = document.getElementById(\"passInput\");\n\t\tpassbox.onkeydown = (e)=>{\n\t\t\tif (e.keyCode === 13) {\n\t\t\t\tthis.props.send({type : bit.SK_PASS, text : document.getElementById(\"passInput\").value});\n\t\t\t}\n\t\t};\n\t}\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './style.css';\nimport {postRequest,getRequest,bit} from './utils.js';\nimport * as command from './command.js';\nimport * as display from './display.js';\nimport * as help from './help.js';\nimport * as topbar from './topbar.js';\nimport * as serviceWorker from './serviceWorker';\n//import testdata from './testdata.json';\n\n\nclass Main extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttopMessage : \"\",\n\t\t\ttopDropdown : \"nothing\",\n\t\t\topenDirList : {},\n\t\t\tsaveDirList : {},\n\t\t\tqueryHistory: ['',],\n\t\t\thistoryPosition : 0,\n\t\t\tshowQuery : <></>,\n\t\t\tshowHelp : 0,\n\t\t\tnotifyUpdate : true,\n\t\t\tconfigpath : \"\",\n\t\t\tversion : \"\",\n\t\t\tsessionId : \"\",\n\t\t}\n\t\tthis.topDropReset = this.topDropReset.bind(this);\n\n\t\t//restore previous session or initialize paths\n\t\tgetRequest({info:\"getState\"})\n\t\t\t.then(dat=>{\n\t\t\t\tif (dat.history) this.setState({ queryHistory : dat.history, historyPosition : dat.history.length-1 });\n\t\t\t\tif (dat.openDirList) this.setState({ openDirList : dat.openDirList });\n\t\t\t\tif (dat.saveDirList) this.setState({ saveDirList : dat.saveDirList });\n\t\t\t\tif (dat.version) this.setState({ version : dat.version });\n\t\t\t\tif ('notifyUpdate' in dat) this.setState({ notifyUpdate : dat.notifyUpdate });\n\t\t\t\tif (dat.configpath) this.setState({ configpath : dat.configpath });\n\t\t\t\tvar textbox = document.getElementById(\"textBoxId\");\n\t\t\t\tif (textbox != null)\n\t\t\t\t\ttextbox.value = this.state.queryHistory[this.state.historyPosition].query || \"\";\n\t\t\t});\n\t}\n\tshowLoadedQuery(results){\n\t\tif (results.status & bit.DAT_ERROR){\n\t\t\tif (results.message === undefined || results.message === \"\"){\n\t\t\t\talert(\"Could not make query or get error message from query engine\");\n\t\t\t\tconsole.log(results);\n\t\t\t}else\n\t\t\t\talert(results.message);\n\t\t}\n\t\telse if (results.status & bit.DAT_GOOD){\n\t\t\tthis.setState({\n\t\t\t\ttopDropdown : \"nothing\",\n\t\t\t\tshowQuery : results.entries.map(\n\t\t\t\t\ttab => <display.QueryRender \n\t\t\t\t\t\t\t   table = {tab} \n\t\t\t\t\t\t\t   hideColumns = {new Int8Array(tab.numcols)}\n\t\t\t\t\t\t\t   rows = {new Object({col:\"\",val:\"*\"})}\n\t\t\t\t\t\t   />) });\n\t\t\tpostRequest({path:\"/info?info=setState\",body:{\n\t\t\t\thaveInfo : true,\n\t\t\t\tcurrentQuery : document.getElementById(\"textBoxId\").value,\n\t\t\t\thistory : this.state.queryHistory,\n\t\t\t\topenDirList : this.state.openDirList,\n\t\t\t\tsaveDirList : this.state.saveDirList,\n\t\t\t}});\n\t\t}\n\t}\n\n\tsubmitQuery(querySpecs){\n\t\tvar fullQuery = {\n\t\t\tsessionId: this.state.sessionId || \"\",\n\t\t\tquery: querySpecs.query || \"\", \n\t\t\tfileIO: querySpecs.fileIO || 0, \n\t\t\tsavePath: querySpecs.savePath || \"\", \n\t\t\t};\n\t\tpostRequest({path:\"/query/\",body:fullQuery}).then(dat=>{\n\t\t\tif ((dat.status & bit.DAT_GOOD) && (!querySpecs.backtrack)){\n\t\t\t\tthis.setState({ historyPosition : this.state.queryHistory.length,\n\t\t\t\t\t\t\t\tqueryHistory : this.state.queryHistory.concat({query : dat.originalQuery}) });\n\t\t\t}\n\t\t\tthis.showLoadedQuery(dat);\n\t\t});\n\t}\n\tsendSocket(request){\n\t\tthis.ws.send(JSON.stringify(request));\n\t}\n\n\tviewHistory(position){\n\t\tthis.setState({ historyPosition : position });\n\t\tvar textbox = document.getElementById(\"textBoxId\");\n\t\tif (textbox != null) { textbox.value = this.state.queryHistory[position].query; }\n\t}\n\ttopDropReset(e){ \n\t\tsetTimeout(()=>{\n\t\t\tif (!e.target.matches('.dropContent'))\n\t\t\t\tthis.setState({ topDropdown : \"nothing\" }); \n\t\t\tif (this.state.showHelp && !e.target.matches('.helpDrop'))\n\t\t\t\tthis.setState({ showHelp : false }); \n\t\t},50);\n\t}\n\tchangeFilePath(whichPath){\n\t\tif (whichPath.type === \"open\")\n\t\t\tthis.state.openDirList.path = whichPath.path;\n\t\tif (whichPath.type === \"save\")\n\t\t\tthis.state.saveDirList.path = whichPath.path;\n\t\tthis.forceUpdate();\n\t}\n\n\tfileClick(request){\n\t\tpostRequest({path:\"/info?info=fileClick\",body:{\n\t\t\tpath : request.path,\n\t\t\tmode : request.mode,\n\t\t\tsessionId: this.state.sessionId,\n\t\t}}).then(dat=>{if (dat.mode) {\n\t\t\tswitch (dat.mode){\n\t\t\tcase \"open\":\n\t\t\t\tthis.setState({openDirList: dat});\n\t\t\t\tbreak;\n\t\t\tcase \"save\":\n\t\t\t\tthis.setState({saveDirList: dat});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({topMessage: \"error\"});\n\t\t}});\n\t}\n\n\trender(){\n\t\n\t\tdocument.addEventListener('click',this.topDropReset);\n\n\t\treturn (\n\t\t<>\n\t\t<topbar.TopMenuBar\n\t\t\ts = {this.state}\n\t\t\tupdateTopMessage = {(message)=>this.setState({ topMessage : message })}\n\t\t\tsubmitQuery = {(query)=>this.submitQuery(query)}\n\t\t\tviewHistory = {(position)=>this.viewHistory(position)}\n\t\t\tchangeTopDrop = {(section)=>this.setState({ topDropdown : section })}\n\t\t\ttoggleHelp = {()=>{this.setState({showHelp:this.state.showHelp^1})}}\n\t\t\tshowHelp = {this.state.showHelp}\n\t\t\topenDirList = {this.state.openDirList}\n\t\t\tsaveDirList = {this.state.saveDirList}\n\t\t\tchangeFilePath = {(path)=>this.changeFilePath(path)}\n\t\t\tsendSocket = {(request)=>this.sendSocket(request)}\n\t\t\tfileClick = {(request)=>this.fileClick(request)}\n\t\t/>\n\t\t<help.Help\n\t\t\tversion = {this.state.version}\n\t\t\tshow = {this.state.showHelp}\n\t\t\tnotifyUpdate = {this.state.notifyUpdate}\n\t\t\tconfigpath = {this.state.configpath}\n\t\t\ttoggleHelp = {()=>{this.setState({showHelp:this.state.showHelp^1})}}\n\t\t/>\n\n\t\t<div className=\"querySelect\"> \n\t\t<command.QueryBox\n\t\t\ts = {this.state}\n\t\t\tshowLoadedQuery = {(results)=>this.showLoadedQuery(results)}\n\t\t\tsubmitQuery = {(query)=>this.submitQuery(query)}\n\t\t\tsendSocket = {(request)=>this.sendSocket(request)}\n\t\t/>\n\t\t{this.state.showQuery}\n\t\t</div>\n\t\t</>\n\t\t)\n\t}\n\n\tcomponentDidMount(){\n\t\t//websocket\n\t\tvar bugtimer = window.performance.now() + 30000\n\t\tvar that = this;\n\t\tthis.ws = new WebSocket(\"ws://localhost:8061/socket/\");\n\t\tconsole.log(this.ws);\n\t\tthis.ws.onopen = function(e) { console.log(\"OPEN\"); }\n\t\tthis.ws.onclose = function(e) { console.log(\"CLOSE\"); that.ws = null; } \n\t\tthis.ws.onmessage = function(e) { \n\t\t\tconsole.log(e.data);\n\t\t\tvar dat = JSON.parse(e.data);\n\t\t\tswitch (dat.type) {\n\t\t\tcase bit.SK_PING:\n\t\t\t\tbugtimer = window.performance.now() + 20000\n\t\t\t\tbreak;\n\t\t\tcase bit.SK_MSG:\n\t\t\t\tthat.setState({ topMessage : dat.text }); \n\t\t\t\tbreak;\n\t\t\tcase bit.SK_PASS:\n\t\t\t\tthat.setState({ topDropdown : \"passShow\" });\n\t\t\t\tbreak;\n\t\t\tcase bit.SK_ID:\n\t\t\t\tthat.setState({ sessionId : dat.id });\n\t\t\t\tconsole.log(\"WS session id: \"+that.state.sessionId);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.ws.onerror = function(e) { console.log(\"ERROR: \" + e.data); } \n\t\twindow.setInterval(()=>{\n\t\t\tif (window.performance.now() > bugtimer+20000)\n\t\t\t\tthat.setState({ topMessage : \"Query Engine Disconnected!\"})\n\t\t},2000);\n\t\t//that.showLoadedQuery(testdata);\n\t}\n\tcomponentWillMount() { document.title = 'CSV Query Tool' }\n}\n\nReactDOM.render(\n\t<Main/>, \n\tdocument.getElementById('root'));\n\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}